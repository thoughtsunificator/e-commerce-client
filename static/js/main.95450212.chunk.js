(this["webpackJsonpe-commerce-client"]=this["webpackJsonpe-commerce-client"]||[]).push([[0],{1e3:function(e,t){},1001:function(e,t){},1019:function(e,t,a){},1020:function(e,t,a){},1021:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(49),o=a.n(s),c=a(1039),l=a(21),i=a(412),m=a(109),p=a(1028),u=a(525),d=a.n(u),h=a(223);const E=e=>e.ok?e:e.headers.has("content-type")&&e.headers.get("content-type").startsWith("application/json")?e.json().then(e=>Promise.reject(e)):Promise.reject({code:e.status,message:e.statusText}),g=(e,t)=>({type:"SET_AUTH_TOKEN",token:e,refreshToken:t}),f=e=>({type:"AUTH_ERROR",error:e}),y=(e,t,a)=>{const n=d()(e);a(g(e,t)),a({type:"AUTH_SUCCESS",currentUser:n}),localStorage.setItem("token",e),localStorage.setItem("refresh_token",t)},v=(e,t)=>a=>(a({type:"AUTH_REQUEST"}),fetch("".concat("https://e-commerce-api3.herokuapp.com/api","/login_check"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(e=>E(e)).then(e=>e.json()).then(({token:e,refresh_token:t})=>y(e,t,a)).catch(e=>{const t=401===e.code?"Incorrect email or password":"Unable to login, please try again";return a(f(e)),Promise.reject(new h.a({_error:t}))})),b=()=>(e,t)=>{e({type:"AUTH_REQUEST"});const a=t().auth.refreshToken;return fetch("/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:a})}).then(e=>E(e)).then(e=>e.json()).then(({token:t,refresh_token:a})=>y(t,a,e)).catch(t=>{console.error(t),e(f(t)),e({type:"CLEAR_AUTH"}),localStorage.removeItem("token")})};var x=a(336);const C=Object(n.createContext)();class O extends n.Component{constructor(e){super(e),this.state={loading:null,timeout:null,results:[],fetchResults:this.fetchResults.bind(this),setResults:e=>this.setState({results:e}),clearResults:()=>this.setState({results:[]})}}fetchResults(e){this.setState({loading:!0}),clearTimeout(this.state.timeout),this.setState({timeout:setTimeout(()=>{fetch("".concat("https://e-commerce-api3.herokuapp.com/api","/products?name=").concat(e)).then(e=>e.json()).then(e=>{this.setState({loading:!1,results:e["hydra:member"]})})},500)})}render(){return r.a.createElement(C.Provider,{value:this.state},this.props.children)}}class S extends n.Component{handleChange(e){let t=e.target;t.value.trim().length>=1?this.context.fetchResults(t.value):this.context.clearResults()}render(){return r.a.createElement("input",{id:"searchBar",type:"text",placeholder:"Search...",onChange:this.handleChange.bind(this)})}}S.contextType=C;var j=a(47);class k extends n.Component{addCart(e){this.props.dispatch({type:"ADD_PRODUCT",product:Object(j.a)({},e,{quantity:1})})}render(){let e=this.props,t=e.id,a=e.name,n=e.price,s=e.description;return r.a.createElement("div",{className:"SearchResultItem"},r.a.createElement("img",{style:{marginRight:15,marginLeft:5,borderRadius:15},src:"https://fakeimg.pl/80x80/282828/F2F4F3",alt:""}),r.a.createElement("div",null,r.a.createElement("h4",null,r.a.createElement(x.a,{onClick:this.props.hideResults,to:"/product/".concat(t)},a)),r.a.createElement("p",{style:{fontSize:"0.7rem",textAlign:"justify",margin:"5px 0 11px"}},s),r.a.createElement("div",null,r.a.createElement("p",{style:{float:"left"}},n," \u20ac"),r.a.createElement("button",{className:"addToCart",onClick:()=>this.addCart(this.props)},"Ajouter au panier"))))}}k.contextType=C;var P=Object(l.connect)()(k);class T extends n.Component{render(){return!1===this.context.loading&&this.context.results.length>=1?r.a.createElement("div",{ref:this.mount,className:"resultSearchBar"},this.context.results.map(e=>r.a.createElement(P,Object.assign({hideResults:this.props.hideResults},e)))):null}}T.contextType=C;class N extends n.Component{constructor(e){super(e),this.state={showResults:!1}}handleClickOutside(e){this.mount&&!0===this.mount.contains(e.target)?this.setState({showResults:!0}):this.setState({showResults:!1})}componentDidMount(){document.addEventListener("mousedown",this.handleClickOutside.bind(this)),document.addEventListener("mousedown",this.handleClickOutside.bind(this))}componentWillUnmount(){document.removeEventListener("mousedown",this.handleClickOutside.bind(this))}render(){return r.a.createElement("div",{ref:e=>this.mount=e,id:"containerSearch"},r.a.createElement(O,null,r.a.createElement(S,null),!0===this.state.showResults&&r.a.createElement(T,{hideResults:()=>{this.setState({showResults:!1})}})))}}var R=a(290),_=a.n(R),I=a(526),w=a.n(I),D=a(527),U=a.n(D),A=a(528),M=a.n(A),F=a(529),G=a.n(F);class L extends r.a.Component{logOut(){this.props.dispatch({type:"CLEAR_AUTH"}),localStorage.removeItem("token"),localStorage.removeItem("refreshToken")}render(){return r.a.createElement("div",{className:"header-bar"},r.a.createElement(x.a,{to:"/"},r.a.createElement("h1",{id:"logo"},"UNIVERSHOP")),r.a.createElement(N,null),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(x.a,{to:"/cart"},r.a.createElement("img",{src:_.a,className:"icon",alt:"#"}),r.a.createElement("small",null,this.props.cart.length)),r.a.createElement("span",null,"Panier")),null===this.props.currentUser?r.a.createElement("li",null,r.a.createElement(x.a,{to:"/login"},r.a.createElement("img",{src:U.a,className:"icon",alt:"#"})),r.a.createElement("span",null,"Login")):[this.props.currentUser.roles.includes("ROLE_ADMIN")&&r.a.createElement("li",null,r.a.createElement("a",{href:"/admin",target:"_blank"},r.a.createElement("img",{src:M.a,className:"icon",alt:"#"})),r.a.createElement("span",null,"Admin")),r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(x.a,{to:"/dashboard"},r.a.createElement("img",{src:w.a,className:"icon",alt:"#"})),r.a.createElement("span",null,"Dashboard")),r.a.createElement("li",{onClick:()=>this.logOut()},r.a.createElement("img",{src:G.a,className:"icon",id:"logout",alt:"#"}),r.a.createElement("span",null,"Logout")))]))}}var z=Object(l.connect)(e=>({cart:e.cart,currentUser:e.auth.currentUser}))(L),B=a(42),H=a(7),Q=a(530),q=a.n(Q);function J(){const e=Object(n.useRef)();Object(B.d)(()=>e.current.rotation.z+=.001);const t=(new H.TextureLoader).load(q.a);return r.a.createElement("mesh",{ref:e,position:[0,1,0],"rotation-x":Math.PI/2},r.a.createElement("planeBufferGeometry",{attach:"geometry",args:[1500,1500,1]}),r.a.createElement("meshBasicMaterial",{side:H.BackSide,transparent:!0,opacity:.8,attach:"material",map:t}))}function V(e){let t=e.t;const a=Object(n.useRef)();Object(B.d)(()=>a.current.rotation.y-=.001);const s=e.iteration,o=e.floatSpread,c=e.distanceFactor,l=e.color,i=Object(n.useMemo)(()=>{let e=[];for(let a=0;a<s;a++){t++;for(let a=0;a<1e3;a++){const n=a/1e3,r=n*Math.PI+t+H.Math.randFloatSpread(o),s=H.Math.randFloatSpread(.15),l=n*c;e.push(l*Math.sin(r)*Math.cos(s)),e.push(l*Math.sin(r)*Math.sin(s)),e.push(l*Math.cos(r))}}return new Float32Array(e)},[s,o,t,c]);return r.a.createElement("points",{ref:a},r.a.createElement("bufferGeometry",{attach:"geometry"},r.a.createElement("bufferAttribute",{attachObject:["attributes","position"],array:i,count:i.length/3,itemSize:3})),r.a.createElement("pointsMaterial",{attach:"material",color:l}))}function Y(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{iteration:8,t:0,floatSpread:.5,distanceFactor:1e3,color:16777215}),r.a.createElement(V,{iteration:12,t:16,floatSpread:10,distanceFactor:1500,color:"#51fcff"})," // TODO",r.a.createElement(V,{iteration:8,t:8,floatSpread:.5,distanceFactor:500,color:16777215}))}var W=a(82),K=a.n(W),X=a(60);const Z={hover:!1,position:new H.Vector3,zoom:!1,loadingCategories:null,loadingShops:null,categories:[],shops:[]},$=Object(n.createContext)(Z),ee=$.Provider,te=({children:e})=>{const t=Object(n.useReducer)((e,t)=>{if("hover"===t.type)return e.hover=t.hover,e;if("position"===t.type)return e.position=t.position,e;if("zoom"===t.type)return e.zoom=t.zoom,e;if("history"===t.type)return e.history=t.history,e;if("categoriesLoaded"===t.type)return Object(j.a)({},e,{loadingCategories:!1,categories:t.categories});if("shopsLoaded"===t.type)return Object(j.a)({},e,{loadingShops:!1,shops:t.shops,category:t.category});if("loadingCategories"===t.type)return Object(j.a)({},e,{history:t.history,loadingCategories:!0});if("loadingShops"===t.type)return Object(j.a)({},e,{history:t.history,category_id:t.category_id,loadingShops:!0});throw new Error},Z),a=Object(X.a)(t,2),s=a[0],o=a[1];return r.a.createElement(ee,{value:{state:s,dispatch:o}},e)};function ae(){const e=Object(n.useContext)($).state,t=Object(B.e)().camera;return Object(B.d)(()=>{!1===e.zoom?(t.position.x=K()(t.position.x,-200,.08),t.position.y=K()(t.position.y,400,.08),t.position.z=K()(t.position.z,1e3,.08)):(t.position.x=K()(t.position.x,e.position.x,.08),t.position.y=K()(t.position.y,e.position.y,.08),t.position.z=K()(t.position.z,e.position.z,.08)),t.updateProjectionMatrix()}),null}var ne=a(535),re=a.n(ne);function se(e){const t=Object(n.useContext)($),a=t.dispatch,s=t.state,o=Object(n.useRef)(),c=(new H.TextureLoader).load(re.a),l=t=>{"undefined"!==typeof t.preventDefault&&t.preventDefault(),s.position.setFromMatrixPosition(o.current.matrixWorld),a({type:"zoom",zoom:!0}),setTimeout((function(){s.history.push("/category/"+e.category_id)}),700)};return r.a.createElement("mesh",Object.assign({ref:o},e,{onClick:l}),r.a.createElement("planeBufferGeometry",{attach:"geometry",args:[70,70,30]}),r.a.createElement("meshBasicMaterial",{side:H.BackSide,depthTest:!1,transparent:!0,attach:"material",map:c}),r.a.createElement(B.b,null,r.a.createElement("div",{onClick:l,style:{cursor:"pointer"},className:"content-planet-sdauhsdayudash"},r.a.createElement("a",{className:"categories"},e.name))))}function oe(){const e=Object(n.useRef)(),t=Object(n.useContext)($).state;return Object(B.d)(()=>e.current.rotation.z+=.001),r.a.createElement("group",null,r.a.createElement("mesh",{ref:e,position:[0,1,0],"rotation-x":Math.PI/2},r.a.createElement("planeBufferGeometry",{attach:"geometry",args:[1,1,1]}),[{name:t.categories[0].name,category_id:t.categories[0].id,position:[400,1,-50],"rotation-z":Math.PI/2},{name:t.categories[1].name,category_id:t.categories[1].id,position:[2,300,-50],"rotation-z":Math.PI/2},{name:t.categories[2].name,category_id:t.categories[2].id,position:[30,-400,-50],"rotation-z":Math.PI/3},{name:t.categories[3].name,category_id:t.categories[3].id,position:[-300,0,-50],"rotation-z":Math.PI/4},{name:t.categories[4].name,category_id:t.categories[4].id,position:[200,200,-50],"rotation-z":Math.PI/5}].map(e=>r.a.createElement(se,Object.assign({key:e.category_id},e)))))}var ce=a(293),le=a.n(ce);function ie(e){const t=Object(n.useContext)($),a=t.dispatch;return Object(n.useEffect)(()=>{a({type:"loadingCategories",history:e.history}),fetch("".concat("https://e-commerce-api3.herokuapp.com/api","/categories")).then(e=>e.json()).then(e=>{a({type:"categoriesLoaded",categories:e["hydra:member"]})})},[]),!1===t.state.loadingCategories?r.a.createElement(r.a.Fragment,null,r.a.createElement(J,null),r.a.createElement(Y,null),r.a.createElement(oe,null),r.a.createElement(ae,null)):null}var me=function(e){return r.a.createElement(B.a,{style:{position:"absolute",top:0,backgroundColor:"black",backgroundImage:"url(".concat(le.a,")")},camera:{position:[-1e3,2e3,5e3],rotation:[-.5,-.2,-.6],fov:50,near:10,far:1e4},resize:{scroll:!1}},r.a.createElement(te,null,r.a.createElement(ie,{history:e.history})))};class pe extends r.a.Component{render(){return r.a.createElement(me,{history:this.props.history})}}var ue=pe,de=a(1022),he=a(609),Ee=()=>e=>{function t(t){const a=t.authenticating,n=t.loggedIn,s=t.error,o=Object(he.a)(t,["authenticating","loggedIn","error"]);return a?r.a.createElement("div",null,"Logging in..."):!n||s?r.a.createElement(de.a,{to:"/login"}):r.a.createElement(e,o)}const a=e.displayName||e.name||"Component";t.displayName="RequiresLogin(".concat(a,")");return Object(l.connect)((e,t)=>({authenticating:e.auth.loading,loggedIn:null!==e.auth.currentUser,error:e.auth.error}))(t)},ge=a(33),fe=a(289),ye=a.n(fe),ve=a(1029),be=a(1030),xe=a(1031),Ce=a(1032),Oe=a(1033),Se=a(1034),je=a(1035),ke=a(1036),Pe=a(1037),Te=a(1038),Ne=a(593),Re=a.n(Ne),_e=a(286),Ie=a(287),we=a(108),De=a(288),Ue=a(499),Ae=a(182),Me=a(95);const Fe=e=>r.a.createElement(ge.EditGuesser,e,r.a.createElement(ge.InputGuesser,{source:"username"}),r.a.createElement(ge.InputGuesser,{source:"email"}),r.a.createElement(_e.a,{source:"roles"},r.a.createElement(Ie.a,null,r.a.createElement(we.a,null))),r.a.createElement(De.a,{source:"customer",reference:"customers",filterToQuery:e=>({name:e})},r.a.createElement(Ue.a,{optionText:"name"})),r.a.createElement(De.a,{source:"merchant",reference:"merchants",filterToQuery:e=>({name:e})},r.a.createElement(Ue.a,{optionText:"name"})),r.a.createElement(De.a,{source:"seller",reference:"sellers",filterToQuery:e=>({name:e})},r.a.createElement(Ue.a,{optionText:"name"}))),Ge=e=>r.a.createElement(ge.CreateGuesser,e,r.a.createElement(ge.InputGuesser,{source:"username"}),r.a.createElement(ge.InputGuesser,{source:"email",type:"email"}),r.a.createElement(ge.InputGuesser,{source:"password",type:"password"}),r.a.createElement(ge.InputGuesser,{source:"roles"}),r.a.createElement(De.a,{source:"customer",reference:"customers",filterToQuery:e=>({name:e})},r.a.createElement(Ue.a,{optionText:"name"})),r.a.createElement(De.a,{source:"merchant",reference:"merchants",filterToQuery:e=>({name:e})},r.a.createElement(Ue.a,{optionText:"name"})),r.a.createElement(De.a,{source:"seller",reference:"sellers",filterToQuery:e=>({name:e})},r.a.createElement(Ue.a,{optionText:"name"}))),Le=e=>r.a.createElement(ge.ListGuesser,e,r.a.createElement(ge.FieldGuesser,{source:"username"}),r.a.createElement(ge.FieldGuesser,{source:"email"}),r.a.createElement(ge.FieldGuesser,{source:"roles"}),r.a.createElement(Ae.a,{source:"customer",reference:"customers"},r.a.createElement(Me.a,{source:"name"})),r.a.createElement(Ae.a,{source:"merchant",reference:"merchants"},r.a.createElement(Me.a,{source:"name"})),r.a.createElement(Ae.a,{source:"seller",reference:"sellers"},r.a.createElement(Me.a,{source:"name"}))),ze=e=>r.a.createElement(ge.ShowGuesser,e,r.a.createElement(ge.FieldGuesser,{source:"id",addLabel:!0}),r.a.createElement(ge.FieldGuesser,{source:"username",addLabel:!0}),r.a.createElement(ge.FieldGuesser,{source:"email",addLabel:!0}),r.a.createElement(ge.FieldGuesser,{source:"roles",addLabel:!0}),r.a.createElement(Ae.a,{source:"customer",reference:"customers"},r.a.createElement(Me.a,{source:"name"})),r.a.createElement(Ae.a,{source:"merchant",reference:"merchants"},r.a.createElement(Me.a,{source:"name"})),r.a.createElement(Ae.a,{source:"seller",reference:"sellers"},r.a.createElement(Me.a,{source:"name"}))),Be=e=>ye()(e,{headers:new Headers({Authorization:"Bearer ".concat(localStorage.getItem("token"))})}).then(({api:e})=>({api:e}),e=>{switch(e.status){case 401:return Promise.resolve({api:e.api,customRoutes:[{props:{path:"/",render:()=>r.a.createElement(de.a,{to:"/login"})}}]});default:return Promise.reject(e)}}),He=Object(ge.dataProvider)("https://e-commerce-api3.herokuapp.com/api",(e,t={})=>Object(ge.fetchHydra)(e,Object(j.a)({},t,{headers:new Headers({Authorization:"Bearer ".concat(localStorage.getItem("token"))})})),Be);class Qe extends r.a.Component{render(){return!1===this.props.roles.includes("ROLE_ADMIN")?"Unauthorized access":r.a.createElement(ge.HydraAdmin,{loginPage:!1,apiDocumentationParser:Be,dataProvider:He,entrypoint:"https://e-commerce-api3.herokuapp.com/api"},r.a.createElement(ge.ResourceGuesser,{name:"carts",icon:ve.a}),r.a.createElement(ge.ResourceGuesser,{name:"cart_items",icon:be.a}),r.a.createElement(ge.ResourceGuesser,{name:"categories",icon:xe.a}),r.a.createElement(ge.ResourceGuesser,{name:"customers",icon:Ce.a}),r.a.createElement(ge.ResourceGuesser,{name:"merchants",icon:Oe.a}),r.a.createElement(ge.ResourceGuesser,{name:"products",icon:Se.a}),r.a.createElement(ge.ResourceGuesser,{name:"sellers",icon:je.a}),r.a.createElement(ge.ResourceGuesser,{name:"seller_items",icon:ke.a}),r.a.createElement(ge.ResourceGuesser,{name:"shops",icon:Pe.a}),r.a.createElement(ge.ResourceGuesser,{name:"shop_items",icon:Te.a}),r.a.createElement(ge.ResourceGuesser,{name:"users",list:Le,create:Ge,edit:Fe,show:ze,icon:Re.a}))}}var qe=Ee()(Object(l.connect)(e=>{const t=e.auth.currentUser;return{username:t.username,email:t.email,roles:t.roles}})(Qe));class Je extends r.a.Component{render(){return r.a.createElement("div",{className:"dashboard"},r.a.createElement("div",{className:"dashboard-username"},"Username: ",this.props.username),r.a.createElement("div",{className:"dashboard-email"},"Email: ",this.props.email),r.a.createElement(x.a,{to:"/orders"},"Orders"))}}var Ve=Ee()(Object(l.connect)(e=>{const t=e.auth.currentUser;return{username:t.username,email:t.email,protectedData:e.protectedData.data}})(Je)),Ye=a(402),We=a(517),Ke=a(41);class Xe extends r.a.Component{componentDidUpdate(e){!e.meta.active&&this.props.meta.active&&this.input.focus()}render(){let e,t;return this.props.meta.touched&&this.props.meta.error&&(e=r.a.createElement("div",{className:"form-error"},this.props.meta.error)),this.props.meta.touched&&this.props.meta.warning&&(t=r.a.createElement("div",{className:"form-warning"},this.props.meta.warning)),r.a.createElement("div",{className:"form-input"},e,t,r.a.createElement("input",Object.assign({},this.props.input,{id:this.props.input.name,type:this.props.type,placeholder:this.props.placeholder,ref:e=>this.input=e})))}}a(1019);const Ze=e=>e?void 0:"Obligatoire",$e=e=>""!==e.trim()?void 0:"Cannot be empty",et=e=>e.trim()===e?void 0:"Cannot start or end with whitespace",tt=(at={min:10,max:72},e=>at.min&&e.length<at.min?"Must be at least ".concat(at.min," characters long"):at.max&&e.length>at.max?"Must be at most ".concat(at.max," characters long"):void 0);var at;const nt=(rt="password",(e,t)=>rt in t&&e.trim()===t[rt].trim()?void 0:"Does not match");var rt;class st extends r.a.Component{onSubmit(e){const t=e.username,a=e.email,n=e.password,r={username:t,email:a,password:n};return this.props.dispatch((e=>t=>fetch("".concat("https://e-commerce-api3.herokuapp.com/api","/users"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(e=>E(e)).then(e=>e.json()).catch(e=>{const t=e.reason,a=e.message,n=e.location;if("ValidationError"===t)return Promise.reject(new h.a({[n]:a}))}))(r)).then(()=>this.props.dispatch(v(a,n)))}render(){return r.a.createElement("form",{className:"login-form",onSubmit:this.props.handleSubmit(e=>this.onSubmit(e))},r.a.createElement("h2",null,"Register for Univershop"),r.a.createElement(Ye.a,{component:Xe,type:"text",placeholder:"Username",name:"username",validate:[Ze,$e,et]}),r.a.createElement(Ye.a,{component:Xe,type:"email",name:"email",placeholder:"Email",validate:[Ze,$e,et]}),r.a.createElement(Ye.a,{component:Xe,type:"password",placeholder:"Password",name:"password",validate:[Ze,tt,et]}),r.a.createElement(Ye.a,{component:Xe,type:"password",placeholder:"Confirm password",name:"passwordConfirm",validate:[Ze,$e,nt]}),r.a.createElement("button",{type:"submit",disabled:this.props.pristine||this.props.submitting},"Register"))}}var ot=Object(We.a)({form:"registration",onSubmitFail:(e,t)=>t(Object(Ke.c)("registration",Object.keys(e)[0]))})(st);var ct=Object(l.connect)(e=>({loggedIn:null!==e.auth.currentUser}))((function(e){return e.loggedIn?r.a.createElement(de.a,{to:"/dashboard"}):r.a.createElement("div",{className:"home"},r.a.createElement(ot,null))}));class lt extends r.a.Component{onSubmit(e){return this.props.dispatch(v(e.email,e.password))}render(){let e;return this.props.error&&(e=r.a.createElement("div",{className:"form-error","aria-live":"polite"},this.props.error)),r.a.createElement("form",{className:"login-form",onSubmit:this.props.handleSubmit(e=>this.onSubmit(e))},r.a.createElement("h2",null,"Login for Univershop"),e,r.a.createElement(Ye.a,{component:Xe,type:"text",name:"email",placeholder:"Email",id:"email",validate:[Ze,$e]}),r.a.createElement(Ye.a,{component:Xe,type:"password",name:"password",placeholder:"Password",id:"password",validate:[Ze,$e]}),r.a.createElement("div",{className:"form-bottom"},r.a.createElement("button",{disabled:this.props.pristine||this.props.submitting},"Log in"),r.a.createElement(x.a,{to:"/register"},"Pas encore inscrit ?")))}}var it=Object(We.a)({form:"login",onSubmitFail:(e,t)=>t(Object(Ke.c)("login","email"))})(lt);var mt=Object(l.connect)(e=>({loggedIn:null!==e.auth.currentUser}))((function(e){return e.loggedIn?r.a.createElement(de.a,{to:"/dashboard"}):r.a.createElement("div",{className:"home"},r.a.createElement(it,null))})),pt=a(594),ut=a(610),dt=a(607),ht=a(595),Et=a(596),gt=a.n(Et);function ft(){const e=Object(n.useRef)();Object(B.d)(()=>e.current.rotation.y+=.002);const t=(new H.TextureLoader).load(gt.a);return r.a.createElement("mesh",{ref:e,position:[0,1,0],"rotation-y":Math.PI/2},r.a.createElement("sphereGeometry",{attach:"geometry",args:[100,100,100]}),r.a.createElement("meshBasicMaterial",{attach:"material",map:t}))}function yt(e){const t=Object(n.useContext)($),a=t.dispatch,s=t.state,o=Object(n.useRef)(),c=t=>{"undefined"!==typeof t.preventDefault&&t.preventDefault(),s.position.setFromMatrixPosition(o.current.matrixWorld),a({type:"zoom",zoom:!0}),setTimeout((function(){s.history.push("/category/"+s.category_id+"/shop/"+e.shop_id)}),700)};return r.a.createElement("mesh",Object.assign({"rotation-y":Math.PI/2,ref:o,onClick:c},e),r.a.createElement("sphereGeometry",{attach:"geometry",args:[(l=20,i=40,Math.floor(Math.random()*(i-l+1))+l),20,30]}),r.a.createElement("meshLambertMaterial",{attach:"material",color:"grey"}),r.a.createElement(B.b,null,r.a.createElement("div",{onClick:c,style:{cursor:"pointer"},className:"content-planet-sdauhsdayudash"},r.a.createElement("a",{className:"categories"},e.shop_name))));var l,i}function vt(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function bt(e){const t=Object(n.useContext)($).state,a=Object(n.useRef)();return Object(B.d)(()=>{!1===t.hover&&(a.current.rotation.z+=.002)}),r.a.createElement("group",null,r.a.createElement("mesh",{ref:a,position:[0,1,0],"rotation-x":Math.PI/2},r.a.createElement("planeBufferGeometry",{attach:"geometry",args:[1,1,1]}),t.shops.map(t=>r.a.createElement(yt,Object.assign({key:t.id,shop_id:t.id,shop_name:t.name,position:[vt(400,-400),vt(400,-400),0]},e)))))}function xt(){const e=Object(n.useContext)($).state,t=Object(B.e)().camera;return Object(B.d)(()=>{!1===e.zoom?(t.position.x=K()(t.position.x,-150,.08),t.position.y=K()(t.position.y,300,.08),t.position.z=K()(t.position.z,750,.08)):(t.position.x=K()(t.position.x,e.position.x,.08),t.position.y=K()(t.position.y,e.position.y,.08),t.position.z=K()(t.position.z,e.position.z,.08)),t.updateProjectionMatrix()}),null}function Ct(e){const t=Object(n.useContext)($),a=t.dispatch;return Object(n.useEffect)(()=>{a({type:"loadingShops",history:e.history,category_id:e.category_id}),fetch("".concat("https://e-commerce-api3.herokuapp.com/api","/shops?category=").concat(e.category_id)).then(e=>e.json()).then(e=>{a({type:"shopsLoaded",shops:e["hydra:member"]})})},[]),!1===t.state.loadingShops?r.a.createElement(r.a.Fragment,null,r.a.createElement("pointLight",{position:[1,1,1]}),r.a.createElement("ambientLight",{intensity:.2}),r.a.createElement(ft,null),r.a.createElement(bt,null),r.a.createElement(xt,null)):null}Object(B.c)({OrbitControls:pt.a,UnrealBloomPass:ut.a,EffectComposer:dt.a,RenderPass:ht.a});var Ot=function(e){return r.a.createElement(B.a,{onCreated:({camera:e})=>e.lookAt(0,0,0),style:{position:"absolute",top:0,backgroundImage:"url(".concat(le.a,")")},camera:{position:[-1e3,2e3,5e3],fov:50,near:100,far:5e3},resize:{scroll:!1}},r.a.createElement(te,null,r.a.createElement(Ct,{history:e.history,category_id:e.category_id})))};class St extends r.a.Component{render(){return r.a.createElement(Ot,{history:this.props.history,category_id:this.props.match.params.id})}}var jt=a(89),kt=a.n(jt),Pt=a(597),Tt=a(608);class Nt extends r.a.Component{constructor(e){super(e),this.setSortBy=e=>{this.setState({sortBy:e})},this.toggleDirection=()=>{this.setState({direction:"asc"===this.state.direction?"desc":"asc"})},this.goToPage=e=>{this.setState({activePage:e})},this.prevPage=()=>{this.setState(({activePage:e})=>({activePage:e-1}))},this.nextPage=()=>{this.setState(({activePage:e})=>({activePage:e+1}))},this.state={shopItems:[],loading:null,sortBy:"name",direction:"asc",activePage:0,searchQuery:""}}componentDidMount(){var e=this;return Object(Pt.a)(kt.a.mark((function t(){var a,n,r,s,o;return kt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),a=e=>fetch(e).then(e=>e.json()),t.next=4,Promise.all([a("".concat("https://e-commerce-api3.herokuapp.com/api","/shops/").concat(e.props.match.params.shop_id)),a("".concat("https://e-commerce-api3.herokuapp.com/api","/shop_items?shop=").concat(e.props.match.params.shop_id))]);case 4:n=t.sent,r=Object(X.a)(n,2),s=r[0],o=r[1],e.setState({loading:!1,shop:s,shopItems:o["hydra:member"]});case 9:case"end":return t.stop()}}),t)})))()}addCart(e){this.props.dispatch({type:"ADD_PRODUCT",product:Object(j.a)({},e,{quantity:1})})}render(){const e=this.state,t=e.sortBy,a=e.direction,n=e.activePage,s=e.searchQuery;return!1===this.state.loading?this.state.shopItems.length>=1?r.a.createElement(Tt.a,{data:this.state.shopItems,sortBy:t,direction:a,activePage:n,searchQuery:s,paginate:!0,render:({data:e,pages:s})=>r.a.createElement("div",null,r.a.createElement(Rt,{setSortBy:this.setSortBy,sortBy:t,direction:a,toggleDirection:this.toggleDirection}),r.a.createElement("h2",null,this.state.shop.name),r.a.createElement(It,{data:e,addCart:this.addCart.bind(this)}),r.a.createElement(wt,{style:{justifyContent:"space-between"}},r.a.createElement(Dt,{goToPage:this.goToPage,pages:s}),r.a.createElement(At,{pages:s,activePage:n}),r.a.createElement(Ut,{activePage:n,goToPage:this.goToPage,nextPage:this.nextPage,prevPage:this.prevPage,pages:s})))}):"Ce shop n'a pas de produit en vente actuellement":!0===this.state.loading?"Loading...":null}}function Rt({setSortBy:e,sortBy:t,direction:a,toggleDirection:n}){const s=[{key:"id",title:"ID"},{key:"name",title:"Name"},{key:"description",title:"Description"},{key:"price",title:"Price"}].map(({key:s,title:o})=>{const c=s===t;return r.a.createElement(_t,{key:s,active:c,onClick:()=>{c&&n(),e(s)}},o," ",c?"asc"===a?"\u25b2":"\u25bc":null)});return r.a.createElement("div",{style:{display:"grid",gridGap:"5px",gridAutoflow:"column"}},r.a.createElement("div",null,"Sort by"),s)}function _t({children:e,active:t,onClick:a}){return r.a.createElement("div",{onClick:a,style:{fontWeight:t?"bold":"normal",cursor:"pointer"}},e)}function It({data:e,addCart:t}){return r.a.createElement("section",{id:"productList"},e.map(({product:e})=>r.a.createElement("div",{key:e.id,class:"containerProductList"},r.a.createElement("img",{src:"https://fakeimg.pl/100x100/282828/F2F4F3",style:{width:100,height:100},alt:e.name}),r.a.createElement("h2",null,r.a.createElement(x.a,{to:"/product/".concat(e.id)},e.name)),r.a.createElement("p",null,e.description),r.a.createElement("h3",null,e.price," \u20ac"),r.a.createElement("button",{className:"addToCart",onClick:()=>t(e)},r.a.createElement("img",{src:_.a,style:{width:15,height:15},alt:e.name}),"Ajouter au panier"))))}function wt({children:e,style:t}){return r.a.createElement("div",{style:Object(j.a)({display:"flex"},t)},e)}function Dt({goToPage:e,pages:t}){const a=[];for(let n=0;n<t;n++)a.push(r.a.createElement("option",{key:n,value:n},n+1));return r.a.createElement("div",null,"Go to page"," ",r.a.createElement("select",{onChange:t=>e(parseInt(t.target.value))},a))}function Ut({activePage:e=0,goToPage:t,nextPage:a,prevPage:n,pages:s}){return r.a.createElement(wt,null,r.a.createElement("button",{disabled:0===e,onClick:()=>t(0)},"<<"),r.a.createElement("button",{disabled:0===e,onClick:n},"<"),r.a.createElement("button",{disabled:e===s-1,onClick:a},">"),r.a.createElement("button",{disabled:e===s-1,onClick:()=>t(s-1)},">>"))}function At({pages:e,activePage:t=0}){return r.a.createElement("div",null,r.a.createElement("b",null,t+1)," / ",e)}var Mt=Object(l.connect)()(Nt);a(1020);class Ft extends r.a.Component{render(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"about"},r.a.createElement("a",{class:"bg_links social portfolio",href:"https://www.rafaelalucas.com",rel:"noopener noreferrer",target:"_blank"},r.a.createElement("span",{class:"icon"})),r.a.createElement("a",{class:"bg_links social dribbble",href:"https://dribbble.com/rafaelalucas",rel:"noopener noreferrer",target:"_blank"},r.a.createElement("span",{class:"icon"})),r.a.createElement("a",{class:"bg_links social linkedin",href:"https://www.linkedin.com/in/rafaelalucas/",rel:"noopener noreferrer",target:"_blank"},r.a.createElement("span",{class:"icon"})),r.a.createElement("a",{class:"bg_links logo"})),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"planet"},r.a.createElement("div",{className:"ring"}),r.a.createElement("div",{className:"cover-ring"}),r.a.createElement("div",{className:"spots"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null))),r.a.createElement("p",null,"loading")))}}class Gt extends r.a.Component{constructor(e){super(e),this.state={loading:null,productdetail:[]}}componentDidUpdate(e){this.props.match.params.product_id!==e.match.params.product_id&&this.fetchCart()}componentDidMount(){this.fetchCart()}fetchCart(){this.setState({loading:!0}),fetch("".concat("https://e-commerce-api3.herokuapp.com/api","/products?id=").concat(this.props.match.params.product_id)).then(e=>e.json()).then(e=>{this.setState({loading:!1,productdetail:e["hydra:member"]})})}addCart(e){this.props.dispatch({type:"ADD_PRODUCT",product:Object(j.a)({},e,{quantity:1})})}render(){if(!1===this.state.loading){const e=this.state.productdetail.map(e=>r.a.createElement("div",{key:e.id},r.a.createElement("h2",null,e.name),r.a.createElement("h4",null,e.description),r.a.createElement("h4",null,e.price),r.a.createElement("h4",null,e.images),r.a.createElement("h4",null,console.log(e.images)),r.a.createElement("button",{className:"addToCart",onClick:()=>this.addCart(e)},"Ajouter au panier")));return r.a.createElement(r.a.Fragment,null,e)}return r.a.createElement(Ft,null)}}var Lt=Object(l.connect)()(Gt),zt=a(599),Bt=a.n(zt),Ht=a(600),Qt=a.n(Ht);class qt extends r.a.Component{render(){return r.a.createElement("div",{className:"Product"},r.a.createElement("div",{style:{width:100,textAlign:"center"}},r.a.createElement("img",{src:"https://fakeimg.pl/100x100/282828/F2F4F3",alt:this.props.product.name,style:{borderRadius:15}}),r.a.createElement("div",{className:"itemsQuantity"},r.a.createElement("img",{src:Bt.a,onClick:()=>{this.props.dispatch({type:"DELETE_PRODUCT",product:this.props.product})},className:"icon minus",alt:"#"}),r.a.createElement("p",null,this.props.product.quantity),r.a.createElement("img",{src:Qt.a,onClick:()=>{this.props.dispatch({type:"ADD_PRODUCT",product:this.props.product})},className:"icon add",alt:"#"}))),r.a.createElement("div",{className:"Content"},r.a.createElement("h1",null,this.props.product.name),r.a.createElement("p",null,this.props.product.description),r.a.createElement("p",{style:{fontSize:"0.9rem"}},r.a.createElement("strong",null,"Prix unit\xe9 : ")," ",this.props.product.price," \u20ac"),r.a.createElement("p",null,r.a.createElement("strong",null,"Sous total : "),this.props.product.price*this.props.product.quantity," \u20ac")))}}var Jt=Object(l.connect)((e,t)=>Object(j.a)({},t))(qt),Vt=a(601),Yt=a.n(Vt),Wt=a(602),Kt=a.n(Wt),Xt=a(603),Zt=a.n(Xt),$t=a(604),ea=a.n($t),ta=a(605),aa=a.n(ta);class na extends r.a.Component{render(){let e=this.props.shopItems.map(e=>e.price*e.quantity).reduce((e,t)=>e+t);return r.a.createElement("div",null,r.a.createElement("h2",null,"TOTAL"),r.a.createElement("h3",null,"Livraison :"),r.a.createElement("h3",null,"Total \xe0 payer : ",e," \u20ac"),r.a.createElement(x.a,{to:"/checkout"},r.a.createElement("button",{className:"payment"},"Payment")),r.a.createElement("div",{id:"credit-cards"},r.a.createElement("img",{src:Yt.a,alt:"credit-card-maestro",style:{width:"40px"},className:"credit-card"}),r.a.createElement("img",{src:Kt.a,alt:"credit-card-master",style:{width:"40px"},className:"credit-card"}),r.a.createElement("img",{src:Zt.a,alt:"credit-card-american-express",style:{width:"50px"},className:"credit-card"}),r.a.createElement("img",{src:ea.a,alt:"credit-card-visa",style:{width:"60px"},className:"credit-card"}),r.a.createElement("img",{src:aa.a,alt:"credit-card-paypal",style:{width:"70px"},className:"credit-card"})))}}var ra=Object(l.connect)((e,t)=>Object(j.a)({},t))(na);class sa extends r.a.Component{render(){if(this.props.cart.length>0){let e=this.props.cart.map((e,t,a)=>Object(j.a)({},e,{quantity:a.filter(t=>e.id===t.id).length}));return e=e.filter((e,t,a)=>t===a.findIndex(t=>e.id===t.id)),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Cart-Left"},r.a.createElement("h2",null,"MON PANIER"),r.a.createElement("div",{className:"items"},e.map(e=>r.a.createElement(Jt,{product:Object(j.a)({},e),key:e.id})))),r.a.createElement("div",{className:"Cart-Right"},r.a.createElement(ra,{shopItems:e})))}return r.a.createElement("div",{className:"cart-error","aria-live":"polite"},r.a.createElement("h3",null,"Ton panier est vide :/"),r.a.createElement("p",null,"Gooo voyager sur nos principales planete afin de trouver ton bonheur :)"),r.a.createElement(x.a,{to:"/"},r.a.createElement("button",null,"C'est partit !")))}}var oa=Object(l.connect)(e=>({cart:e.cart}))(sa);class ca extends r.a.Component{render(){return r.a.createElement("div",{className:"cart"},r.a.createElement(oa,null))}}const la=Object(n.createContext)();class ia extends n.Component{constructor(e){super(e),this.state={cartItems:JSON.parse(localStorage.getItem("cart")),step:0,customer:{},shipping:{},nextStep:e=>{0===this.state.step&&(this.state.customer=e),1===this.state.step&&(this.state.shipping=e),this.setState(e=>({step:e.step+1}))},previousStep:()=>this.setState(e=>({step:e.step-1})),setShippingData:e=>this.setState(()=>({shipping:e})),setCustomerData:e=>this.setState(()=>({customer:e}))}}render(){return r.a.createElement(la.Provider,{value:this.state},this.props.children)}}class ma extends r.a.Component{constructor(e,t){super(e,t),this.state={firstname:"",lastname:"",address:"",cardNumber:null,cvv:null,expiryMonth:null,expiryYear:null}}postData(e){e.preventDefault(),this.context.nextStep(this.state)}handleChange(e){this.setState({[e.target.name]:e.target.value})}render(){return r.a.createElement("form",{onSubmit:this.postData.bind(this)},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"info"},r.a.createElement("label",{for:"firstname"},"Prenom"),r.a.createElement("input",{value:this.state.firstname,onChange:this.handleChange.bind(this),name:"firstname",id:"firstname",type:"text"}),r.a.createElement("label",{for:"lastname"},"Nom"),r.a.createElement("input",{value:this.state.lastname,onChange:this.handleChange.bind(this),name:"lastname",id:"lastname",type:"text"}),r.a.createElement("label",{for:"address"},"Adresse"),r.a.createElement("input",{value:this.state.address,onChange:this.handleChange.bind(this),name:"address",id:"address",type:"text"})),r.a.createElement("div",{className:"card__container"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"row credit"},r.a.createElement("div",{className:"left"},r.a.createElement("label",{for:"cd"},"Debit/ Credit Card")),r.a.createElement("div",{className:"right"})),r.a.createElement("div",{className:"row cardholder"},r.a.createElement("div",{className:"info"},r.a.createElement("label",{for:"cardholdername"},"Name"),r.a.createElement("input",{value:this.state.cardholdername,onChange:this.handleChange.bind(this),placeholder:"e.g. Richard Bovell",id:"cardholdername",type:"text"}))),r.a.createElement("div",{className:"row number"},r.a.createElement("div",{className:"info"},r.a.createElement("label",{for:"cardnumber"},"Card number"),r.a.createElement("input",{value:this.state.cardNumber,onChange:this.handleChange.bind(this),name:"cardNumber",id:"cardNumber",type:"text",pattern:"[0-9]{16,19}",maxlength:"19",placeholder:"8888-8888-8888-8888"}))),r.a.createElement("div",{className:"row details"},r.a.createElement("div",{className:"left"},r.a.createElement("label",{for:"expiry-date"},"Expiry"),r.a.createElement("select",{value:this.state.expiryMonth,onChange:this.handleChange.bind(this),name:"expiryMonth",id:"expiry-date"},r.a.createElement("option",null,"MM"),r.a.createElement("option",{value:"1"},"01"),r.a.createElement("option",{value:"2"},"02"),r.a.createElement("option",{value:"3"},"03"),r.a.createElement("option",{value:"4"},"04"),r.a.createElement("option",{value:"5"},"05"),r.a.createElement("option",{value:"6"},"06"),r.a.createElement("option",{value:"7"},"07"),r.a.createElement("option",{value:"8"},"08"),r.a.createElement("option",{value:"9"},"10"),r.a.createElement("option",{value:"11"},"11"),r.a.createElement("option",{value:"12"},"12")),r.a.createElement("span",null,"/"),r.a.createElement("select",{value:this.state.expiryYear,onChange:this.handleChange.bind(this),name:"expiryYear",id:"expiry-date"},r.a.createElement("option",null,"YYYY"),r.a.createElement("option",{value:"2016"},"2016"),r.a.createElement("option",{value:"2017"},"2017"),r.a.createElement("option",{value:"2018"},"2018"),r.a.createElement("option",{value:"2019"},"2019"),r.a.createElement("option",{value:"2020"},"2020"),r.a.createElement("option",{value:"2021"},"2021"),r.a.createElement("option",{value:"2022"},"2022"),r.a.createElement("option",{value:"2023"},"2023"),r.a.createElement("option",{value:"2024"},"2024"),r.a.createElement("option",{value:"2025"},"2025"),r.a.createElement("option",{value:"2026"},"2026"),r.a.createElement("option",{value:"2027"},"2027"),r.a.createElement("option",{value:"2028"},"2028"),r.a.createElement("option",{value:"2029"},"2029"),r.a.createElement("option",{value:"2030"},"2030"))),r.a.createElement("div",{className:"right"},r.a.createElement("label",{for:"cvv"},"CVC/CVV"),r.a.createElement("input",{value:this.state.cvv,onChange:this.handleChange.bind(this),name:"cvv",type:"text",maxlength:"4",placeholder:"123"}),r.a.createElement("span",{"data-balloon-length":"medium","data-balloon":"The 3 or 4-digit number on the back of your card.","data-balloon-pos":"up"},"i"))))),r.a.createElement("div",{className:"button"},r.a.createElement("button",null,"Suivant"))))}}ma.contextType=la;class pa extends n.Component{constructor(e,t){super(e,t),this.state={courier:"relais"}}postData(e){e.preventDefault(),this.context.nextStep(this.state)}handleChange(e){this.setState({[e.target.name]:e.target.value})}render(){return r.a.createElement("form",{onSubmit:this.postData.bind(this)},r.a.createElement("label",null,"Frais de port"),r.a.createElement("div",null,r.a.createElement("label",{for:"relais"},"Relais",r.a.createElement("input",{id:"relais",checked:"relais"===this.state.courier,onChange:this.handleChange.bind(this),name:"courier",type:"radio",value:"relais"})),r.a.createElement("label",{for:"standard"},"Standard",r.a.createElement("input",{id:"standard",checked:"standard"===this.state.courier,onChange:this.handleChange.bind(this),name:"courier",type:"radio",value:"standard"})),r.a.createElement("label",{for:"express"},"Express",r.a.createElement("input",{id:"express",checked:"express"===this.state.courier,onChange:this.handleChange.bind(this),name:"courier",type:"radio",value:"express"}))),r.a.createElement("button",null,"Suivant"))}}pa.contextType=la;class ua extends r.a.Component{confirm(e){e.preventDefault();let t=JSON.parse(localStorage.getItem("orders"));null===t&&(t=[]),t.push(this.context),localStorage.setItem("orders",JSON.stringify(t))}render(){let e=this.context.cartItems.map(e=>e.price*e.quantity).reduce((e,t)=>e+t);return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.confirm.bind(this)},r.a.createElement("h4",null,"Detaille de Votre Command"),r.a.createElement("div",null,"Prenom: ",this.context.customer.firstname),r.a.createElement("div",null,"Nom: ",this.context.customer.lastname),r.a.createElement("div",null,"Address: ",this.context.customer.address),r.a.createElement("div",null,"Type de livraison: ",this.context.shipping.courier),r.a.createElement("div",null,r.a.createElement("h4",null,"Resume du Panier"),this.context.cartItems.map(e=>r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("strong",null,"Nom de Produit : ")," ",e.name),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("strong",null,"Prix unit\xe9: ")," ",e.price," \u20ac"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("strong",null,"x : "),e.quantity))),r.a.createElement("div",null,r.a.createElement("strong",null,"Prix total : "),e," \u20ac")),r.a.createElement("div",{className:"button"},r.a.createElement("button",null,"Confirm and Pay"))))}}ua.contextType=la;var da=Object(l.connect)((e,t)=>Object(j.a)({},t))(ua);class ha extends n.Component{render(){return r.a.createElement(ia,null,r.a.createElement(la.Consumer,null,e=>r.a.createElement("div",null,0===e.step&&r.a.createElement(ma,null),1===e.step&&r.a.createElement(pa,null),2===e.step&&r.a.createElement(da,null),e.step>0&&r.a.createElement("button",{onClick:()=>e.previousStep()},"Previous"))))}}ha.contextType=la;var Ea=Object(l.connect)(e=>({user:e.auth.currentUser}))(ha);class ga extends r.a.Component{render(){let e=JSON.parse(localStorage.getItem("orders"));return null===e&&(e=[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Detail de commande :"),e.map(e=>r.a.createElement("div",null,e.cartItems.map(e=>r.a.createElement("div",null,r.a.createElement("h4",null,"Nom produit : ",e.name),r.a.createElement("h4",null,"Description : ",e.description),r.a.createElement("h4",null,"Prix : ",e.price,"  \u20ac"),r.a.createElement("h4",null,e.images),r.a.createElement("h4",null,"Quantite : ",e.quantity))),r.a.createElement("h2",null,"Shipping :"),r.a.createElement("h4",null,"Service postal : ",e.shipping.shippingType),r.a.createElement("h2",null,"Customer :"),r.a.createElement("h4",null,"Nom : ",e.customer.firstname),r.a.createElement("h4",null,"Prenom : ",e.customer.lastname),r.a.createElement("h4",null,"Addres : ",e.customer.address))),";")}}ga.contextType=la;var fa=Ee()(Object(l.connect)(e=>({loggedIn:null!==e.auth.currentUser}))(ga));class ya extends r.a.Component{componentDidUpdate(e){!e.loggedIn&&this.props.loggedIn?this.startPeriodicRefresh():e.loggedIn&&!this.props.loggedIn&&this.stopPeriodicRefresh()}componentWillUnmount(){this.stopPeriodicRefresh()}startPeriodicRefresh(){this.refreshInterval=setInterval(()=>this.props.dispatch(b()),36e5)}stopPeriodicRefresh(){this.refreshInterval&&clearInterval(this.refreshInterval)}render(){return r.a.createElement(i.a,null,r.a.createElement(m.a,{exact:!0,path:"/admin",component:qe}),r.a.createElement(r.a.Fragment,null,r.a.createElement(z,null),r.a.createElement(i.a,null,r.a.createElement(m.a,{exact:!0,path:"/",component:ue}),r.a.createElement(m.a,{exact:!0,path:"/register",component:ct}),r.a.createElement(m.a,{exact:!0,path:"/login",component:mt}),r.a.createElement(m.a,{exact:!0,path:"/dashboard",component:Ve}),r.a.createElement(m.a,{exact:!0,path:"/category/:id",component:St}),r.a.createElement(m.a,{exact:!0,path:"/category/:cat_id/shop/:shop_id",component:Mt}),r.a.createElement(m.a,{exact:!0,path:"/product/:product_id",component:Lt}),r.a.createElement(m.a,{exact:!0,path:"/cart",component:ca}),r.a.createElement(m.a,{exact:!0,path:"/checkout",component:Ea}),r.a.createElement(m.a,{exact:!0,path:"/orders",component:fa}),r.a.createElement(m.a,null,r.a.createElement("div",null,"404 Not found")))))}}var va=Object(p.a)(Object(l.connect)(e=>({hasAuthToken:null!==e.auth.authToken,loggedIn:null!==e.auth.currentUser}))(ya)),ba=a(48),xa=a(404),Ca=a(606);const Oa={token:null,currentUser:null,loading:!1,error:null};const Sa={data:"",error:null};const ja=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[],ka=Object(ba.d)(Object(ba.c)({cart:function(e=[],t){if("ADD_PRODUCT"===t.type)return[...e,t.product];if("DELETE_PRODUCT"===t.type){let a=e.findIndex(e=>e.id===t.product.id);return e.splice(a,1),[...e]}return e},form:xa.a,auth:function(e=Oa,t){return"SET_AUTH_TOKEN"===t.type?Object.assign({},e,{token:t.token,refreshToken:t.refreshToken}):"CLEAR_AUTH"===t.type?Object.assign({},e,{token:null,refreshToken:null,currentUser:null}):"AUTH_REQUEST"===t.type?Object.assign({},e,{loading:!0,error:null}):"AUTH_SUCCESS"===t.type?Object.assign({},e,{loading:!1,currentUser:t.currentUser}):"AUTH_ERROR"===t.type?Object.assign({},e,{loading:!1,error:t.error}):e},protectedData:function(e=Sa,t){return"FETCH_PROTECTED_DATA_SUCCESS"===t.type?Object.assign({},e,{data:t.data,error:null}):"FETCH_PROTECTED_DATA_ERROR"===t.type?Object.assign({},e,{error:t.error}):e}}),{cart:ja},Object(ba.a)(Ca.a));ka.subscribe(e=>{localStorage.setItem("cart",JSON.stringify(ka.getState().cart))});const Pa=localStorage.getItem("token"),Ta=localStorage.getItem("refresh_token");Pa&&(ka.dispatch(g(Pa,Ta)),ka.dispatch(b()));var Na=ka;o.a.render(r.a.createElement(l.Provider,{store:Na},r.a.createElement(c.a,{basename:"/e-commerce-client"},r.a.createElement(va,null))),document.getElementById("root"))},290:function(e,t,a){e.exports=a.p+"static/media/basket.8303a225.svg"},293:function(e,t,a){e.exports=a.p+"static/media/space.9d3600d7.jpg"},526:function(e,t,a){e.exports=a.p+"static/media/dashboard.1d07900f.svg"},527:function(e,t,a){e.exports=a.p+"static/media/user.51c48aa1.svg"},528:function(e,t,a){e.exports=a.p+"static/media/settings.198db764.svg"},529:function(e,t,a){e.exports=a.p+"static/media/logout.43fb8e78.svg"},530:function(e,t,a){e.exports=a.p+"static/media/galaxy2.69477cb8.png"},535:function(e,t,a){e.exports=a.p+"static/media/flare.ac85f706.png"},596:function(e,t,a){e.exports=a.p+"static/media/2k_sun.7ce3a845.jpg"},599:function(e,t,a){e.exports=a.p+"static/media/minus-solid.f5ffbe1a.svg"},600:function(e,t,a){e.exports=a.p+"static/media/plus-solid.46b960ee.svg"},601:function(e,t,a){e.exports=a.p+"static/media/credit-card-maestro.a716727b.svg"},602:function(e,t,a){e.exports=a.p+"static/media/credit-card-master.0bd37246.svg"},603:function(e,t,a){e.exports=a.p+"static/media/credit-card-american-express.08e3d22b.svg"},604:function(e,t,a){e.exports=a.p+"static/media/credit-card-visa.866a7d96.svg"},605:function(e,t,a){e.exports=a.p+"static/media/credit-card-paypal.e2df43a7.svg"},630:function(e,t,a){e.exports=a(1021)},983:function(e,t){},988:function(e,t){}},[[630,1,2]]]);
//# sourceMappingURL=main.95450212.chunk.js.map