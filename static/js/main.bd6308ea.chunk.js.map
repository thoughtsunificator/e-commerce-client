{"version":3,"sources":["actions/utils.js","actions/auth.js","store/SearchProvider.jsx","components/search-bar.jsx","components/search-result.jsx","components/search-results.jsx","components/search.jsx","components/header-bar.jsx","3d/galaxy.jsx","3d/spiral-galaxy.jsx","3d/stars.jsx","store/GalaxyProvider.jsx","3d/camera-controller.jsx","3d/solar-system-mini.jsx","3d/pivot-sphere-solar.jsx","components/galaxy.jsx","pages/landing-page.jsx","components/requires-login.jsx","components/users-guesser.jsx","pages/admin-page.jsx","pages/dashboard-page.jsx","components/input.jsx","validators.js","components/registration-form.jsx","actions/users.js","pages/registration-page.jsx","components/login-form.jsx","pages/login-page.jsx","3d/solar-system.jsx","3d/planet.jsx","3d/pivot-sphere-planets.jsx","3d/controls.jsx","components/solar-system.jsx","pages/shops-page.jsx","pages/shop-page.jsx","components/loading.jsx","pages/product-page.jsx","components/cart-item.jsx","components/cart-total.jsx","components/cart.jsx","pages/cart-page.jsx","store/CheckoutProvider.jsx","components/checkout-customer.jsx","components/checkout-shipping.jsx","components/checkout-total.jsx","pages/checkout-page.jsx","pages/orders-page.jsx","components/app.jsx","reducers/auth.js","actions/protected-data.js","reducers/protected-data.js","store.js","reducers/cart.js","index.jsx"],"names":["normalizeResponseErrors","res","ok","headers","has","get","startsWith","json","then","err","Promise","reject","code","status","message","statusText","setAuthToken","token","refreshToken","type","authError","error","storeAuthInfo","dispatch","decodedToken","jwtDecode","currentUser","localStorage","setItem","login","email","password","fetch","method","body","JSON","stringify","refresh_token","catch","SubmissionError","_error","refreshAuthToken","getState","auth","console","removeItem","SearchContext","createContext","SearchProvider","Component","constructor","props","super","this","state","loading","timeout","results","fetchResults","bind","setResults","setState","clearResults","query","clearTimeout","setTimeout","process","render","Provider","value","children","SearchBar","handleChange","event","target","trim","length","context","id","placeholder","onChange","contextType","SearchResult","addCart","product","quantity","name","price","description","className","style","marginRight","marginLeft","borderRadius","src","alt","Link","onClick","hideResults","to","fontSize","textAlign","margin","float","connect","SearchResults","ref","mount","map","result","Search","showResults","handleClickOutside","contains","componentDidMount","document","addEventListener","componentWillUnmount","removeEventListener","HeaderBar","React","logOut","cart","roles","includes","href","Galaxy","useRef","useFrame","current","rotation","z","texture","THREE","load","position","rotation-x","Math","PI","attach","args","side","transparent","opacity","SpiralGalaxy","t","y","iteration","floatSpread","distanceFactor","color","positions","useMemo","i","norm","theta","randFloatSpread","phi","distance","push","sin","cos","Float32Array","attachObject","array","count","itemSize","Stars","initialState","hover","zoom","loadingCategories","loadingShops","categories","shops","store","GalaxyProvider","useReducer","action","history","category","category_id","Error","CameraController","useContext","camera","useThree","x","lerp","updateProjectionMatrix","SolarSystem","globalState","handleClick","preventDefault","setFromMatrixPosition","matrixWorld","depthTest","cursor","PivotSphere","planetProps","key","Content","useEffect","Fragment","top","backgroundColor","backgroundImage","fov","near","far","resize","scroll","LandingPage","RequiresLogin","authenticating","loggedIn","passThroughProps","Redirect","displayName","Edit","source","ArrayInput","SimpleFormIterator","TextInput","ReferenceInput","reference","filterToQuery","searchText","AutocompleteInput","optionText","Create","List","ReferenceField","TextField","Show","addLabel","apiDocumentationParser","entrypoint","parseHydraDocumentation","Headers","getItem","api","resolve","customRoutes","path","dataProvider","baseDataProvider","url","options","baseFetchHydra","AdminPage","loginPage","icon","ShoppingCart","AddShoppingCart","Class","Person","VerifiedUser","Apps","RecordVoiceOver","FormatListBulleted","Store","GridOn","list","UsersGuesser","create","edit","show","UsersIcon","requiresLogin","username","DashboardPage","protectedData","data","Input","componentDidUpdate","prevProps","meta","active","input","focus","warning","touched","required","undefined","nonEmpty","isTrimmed","passwordLength","min","max","matchesPassword","field","allValues","RegistrationForm","onSubmit","values","user","reason","location","registerUser","handleSubmit","Field","component","validate","disabled","pristine","submitting","reduxForm","form","onSubmitFail","errors","Object","keys","LoginForm","aria-live","System","rotation-y","Planet","shop_id","floor","random","shop_name","randomIntFromInterval","shop","Controls","intensity","extend","OrbitControls","UnrealBloomPass","EffectComposer","RenderPass","onCreated","lookAt","ShopsPage","match","params","ShopPage","setSortBy","sortBy","toggleDirection","direction","goToPage","activePage","prevPage","nextPage","shopItems","searchQuery","fetchText","r","all","resShopItems","paginate","pages","Links","Flex","justifyContent","GoToPage","PageIndicator","Navigation","items","title","ToggleLink","display","gridGap","gridAutoflow","fontWeight","class","width","height","e","parseInt","Loading","rel","ProductPage","productdetail","product_id","fetchCart","Products","images","log","CartItem","ownProps","CartTotal","total","item","reduce","accumulator","currentValue","Cart","shopItem","index","filter","shopItemB","self","findIndex","CartPage","CheckoutContext","CheckoutProvider","cartItems","parse","step","customer","shipping","nextStep","prevState","previousStep","setShippingData","setCustomerData","CustomerInformation","firstname","lastname","address","cardNumber","cvv","expiryMonth","expiryYear","postData","for","cardholdername","pattern","maxlength","data-balloon-length","data-balloon","data-balloon-pos","Shipping","courier","checked","Total","confirm","orders","cartItem","CheckoutPage","Consumer","OrdersPage","order","shippingType","App","startPeriodicRefresh","stopPeriodicRefresh","refreshInterval","setInterval","clearInterval","Switch","Route","exact","RegistrationPage","LoginPage","DetailsProduct","withRouter","hasAuthToken","authToken","createStore","combineReducers","splice","formReducer","assign","applyMiddleware","thunk","subscribe","ReactDOM","basename","getElementById"],"mappings":"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","file":"static/js/main.bd6308ea.chunk.js","sourcesContent":["// Boilerplate code for handling errors from the API.  If the error response\n// contains JSON then we return a rejected promise containing the decoded\n// JSON.  If the error doesn't contain JSON then we return a rejected promise\n// containing the status text.  If there is no error then we continue with\n// the promise chain.\nexport const normalizeResponseErrors = res => {\n    if (!res.ok) {\n        if (\n            res.headers.has('content-type') &&\n            res.headers.get('content-type').startsWith('application/json')\n        ) {\n            // It's a nice JSON error returned by us, so decode it\n            return res.json().then(err => Promise.reject(err));\n        }\n        // It's a less informative error returned by express\n        return Promise.reject({\n            code: res.status,\n            message: res.statusText\n        });\n    }\n    return res;\n};\n","import jwtDecode from 'jwt-decode';\nimport {SubmissionError} from 'redux-form';\n\nimport {normalizeResponseErrors} from './utils';\n\nexport const SET_AUTH_TOKEN = 'SET_AUTH_TOKEN';\nexport const setAuthToken = (token, refreshToken) => ({\n\ttype: SET_AUTH_TOKEN,\n\ttoken,\n\trefreshToken\n});\n\nexport const CLEAR_AUTH = 'CLEAR_AUTH';\nexport const clearAuth = () => ({\n\ttype: CLEAR_AUTH\n});\n\nexport const AUTH_REQUEST = 'AUTH_REQUEST';\nexport const authRequest = () => ({\n\ttype: AUTH_REQUEST\n});\n\nexport const AUTH_SUCCESS = 'AUTH_SUCCESS';\nexport const authSuccess = currentUser => ({\n\ttype: AUTH_SUCCESS,\n\tcurrentUser\n});\n\nexport const AUTH_ERROR = 'AUTH_ERROR';\nexport const authError = error => ({\n\ttype: AUTH_ERROR,\n\terror\n});\n\n// Stores the auth token in state and localStorage, and decodes and stores\n// the user data stored in the token\nconst storeAuthInfo = (token, refreshToken, dispatch) => {\n\tconst decodedToken = jwtDecode(token);\n\tdispatch(setAuthToken(token, refreshToken));\n\tdispatch(authSuccess(decodedToken));\n\tlocalStorage.setItem(\"token\", token)\n\tlocalStorage.setItem(\"refresh_token\", refreshToken)\n};\n\nexport const login = (email, password) => dispatch => {\n\tdispatch(authRequest());\n\treturn (\n\t\tfetch(`/auth/login`, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\temail,\n\t\t\t\tpassword\n\t\t\t})\n\t\t})\n\t\t\t// Reject any requests which don't return a 200 status, creating\n\t\t\t// errors which follow a consistent format\n\t\t\t.then(res => normalizeResponseErrors(res))\n\t\t\t.then(res => res.json())\n\t\t\t.then(({token, refresh_token}) => storeAuthInfo(token, refresh_token, dispatch))\n\t\t\t.catch(err => {\n\t\t\t\tconst {code} = err;\n\t\t\t\tconst message =\n\t\t\t\t\tcode === 401\n\t\t\t\t\t\t? 'Incorrect email or password'\n\t\t\t\t\t\t: 'Unable to login, please try again';\n\t\t\t\tdispatch(authError(err));\n\t\t\t\t// Could not authenticate, so return a SubmissionError for Redux\n\t\t\t\t// Form\n\t\t\t\treturn Promise.reject(\n\t\t\t\t\tnew SubmissionError({\n\t\t\t\t\t\t_error: message\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t})\n\t);\n};\n\nexport const refreshAuthToken = () => (dispatch, getState) => {\n\tdispatch(authRequest());\n\tconst token = getState().auth.refreshToken;\n\treturn fetch(`/auth/refresh`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\trefresh_token: token\n\t\t})\n\t})\n\t\t.then(res => normalizeResponseErrors(res))\n\t\t.then(res => res.json())\n\t\t.then(({token, refresh_token}) => storeAuthInfo(token, refresh_token, dispatch))\n\t\t.catch(err => {\n\t\t\t// TODO\n\t\t\tconsole.error(err)\n\t\t\t// We couldn't get a refresh token because our current credentials\n\t\t\t// are invalid or expired, or something else went wrong, so clear\n\t\t\t// them and sign us out\n\t\t\tdispatch(authError(err));\n\t\t\tdispatch(clearAuth());\n\t\t\tlocalStorage.removeItem(\"token\")\n\t\t});\n};\n","import React, { createContext, Component } from \"react\";\n\nexport const SearchContext = createContext();\n\nexport default class SearchProvider extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n            loading: null,\n            timeout: null,\n            results: [],\n            fetchResults: this.fetchResults.bind(this),\n\t\t\tsetResults: results => this.setState({ results }),\n\t\t\tclearResults: () => this.setState({ results: [] })\n\t\t}\n    }\n     \n    \n    fetchResults(query) {\n        this.setState({loading: true})\n        clearTimeout(this.state.timeout)\n        this.setState({\n            timeout: setTimeout(() => {\n                fetch(`${process.env.REACT_APP_API_URL}/products?name=${query}`)\n                    .then(res => res.json())\n                    .then(res => {\n                        this.setState({\n                            loading: false,\n                            results: res[\"hydra:member\"]\n                        })\n                    })\n            }, 500)\n        })\n    }\n\n\n\trender() {\n        return (\n            <SearchContext.Provider value={this.state}>\n                {this.props.children}\n            </SearchContext.Provider>\n        );\n\t}\n}","import React, { Component } from 'react'\nimport {SearchContext} from '../store/SearchProvider'\n\nexport default class SearchBar extends Component {\n\n    static contextType = SearchContext\n\n    handleChange(event) {\n        let target = event.target\n        if(target.value.trim().length >= 1) {\n            this.context.fetchResults(target.value)\n        } else {\n            this.context.clearResults()\n        }\n    }\n\n    render() {\n       return (\n            <input id=\"searchBar\" type=\"text\" placeholder={\"Search...\"}  onChange={this.handleChange.bind(this)} />\n       )\n    }\n}","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux'\nimport { SearchContext } from '../store/SearchProvider'\n\nclass SearchResult extends Component {\n\n    static contextType = SearchContext\n\n    addCart(product) {\n        this.props.dispatch({\n            type: \"ADD_PRODUCT\",\n            product: { ...product, quantity: 1 }\n        })\n    }\n\n    render() {\n        let { id, name, price, description } = this.props\n        return (\n            <div className=\"SearchResultItem\">\n                <img style={{ marginRight: 15, marginLeft: 5, borderRadius: 15 }} src='https://fakeimg.pl/80x80/282828/F2F4F3' alt=\"\" />\n                <div>\n                    <h4><Link onClick={this.props.hideResults} to={`/product/${id}`}>{name}</Link></h4>\n                    <p style={{ fontSize: '0.7rem', textAlign: \"justify\", margin: \"5px 0 11px\" }}>{description}</p>\n                    <div >\n                        <p style={{ float: \"left\" }}>{price} &euro;</p>\n                        <button className=\"addToCart\" onClick={() => this.addCart(this.props)}>Ajouter au panier</button>\n                    </div>\n                </div>\n            </div>\n\n\n        )\n    }\n}\nexport default connect()(SearchResult);","import React, { Component } from 'react'\nimport SearchResult from './search-result'\nimport {SearchContext} from '../store/SearchProvider'\n\nexport default class SearchResults extends Component {\n\n    static contextType = SearchContext\n\n    render() {\n        if(this.context.loading === false) {\n            if (this.context.results.length >= 1) {\n                return (\n                    <div ref={this.mount} className=\"resultSearchBar\">\n                        {this.context.results.map(result =>\n                            <SearchResult hideResults={this.props.hideResults} {...result} />\n                        )}\n                    </div>\n                )\n            } else {\n                return null\n            }\n        }\n        else {\n            return null\n        }\n    }\n}","import React, { Component } from 'react'\nimport SearchBar from './search-bar'\nimport SearchProvider from '../store/SearchProvider'\nimport SearchResults from './search-results'\n\nexport default class Search extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            showResults: false\n        }\n    }\n\n    handleClickOutside(event) {\n        if (this.mount && this.mount.contains(event.target) === true) {\n            this.setState({\n                showResults: true\n            })\n        } else {\n            this.setState({\n                showResults: false\n            })\n        }\n    }\n\n    componentDidMount() {\n        document.addEventListener('mousedown', this.handleClickOutside.bind(this));\n        document.addEventListener('mousedown', this.handleClickOutside.bind(this));\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('mousedown', this.handleClickOutside.bind(this));\n    }\n\n    render() {\n        return (\n            <div ref={ref => this.mount = ref} id=\"containerSearch\">\n                <SearchProvider>\n                    <SearchBar />\n                    {this.state.showResults === true && <SearchResults hideResults={() => {\n                        this.setState({\n                            showResults: false\n                        })\n                    }} /> }\n                </SearchProvider>\n            </div>\n        )\n    }\n}","import React from 'react';\nimport {connect} from 'react-redux';\nimport {clearAuth} from '../actions/auth';\nimport {Link} from 'react-router-dom';\nimport  Search from './search';\n\nexport class HeaderBar extends React.Component {\n\n\tlogOut() {\n\t\tthis.props.dispatch(clearAuth());\n\t\tlocalStorage.removeItem(\"token\")\n\t\tlocalStorage.removeItem(\"refreshToken\")\n\t}\n\n\trender() {\n\t\treturn\t(\n\t\t\t<div className=\"header-bar\">\n\t\t\t\t<Link to=\"/\"><h1 id=\"logo\">UNIVERSHOP</h1></Link>\n\t\t\t\t<Search />\n\t\t\t\t<ul>\n\t\t\t\t\t<li><Link to=\"/cart\"><img src=\"/SVG/basket.svg\" className=\"icon\" alt=\"#\" /><small>{/* this.props.cart.filter((item, index, self) => {\n\t\t\t\t\t\t\tlet findIndex = self.findIndex(itemB => item.id === itemB.id)\n\t\t\t\t\t\t\treturn findIndex === index\n\t\t\t\t\t\t}) */this.props.cart.length}</small></Link><span>Panier</span></li>\n\t\t\t\t\t{this.props.currentUser === null ?\n\t\t\t\t\t\t\t<li><Link to=\"/login\"><img src=\"/SVG/user.svg\" className=\"icon\" alt=\"#\" /></Link><span>Login</span></li>\n\t\t\t\t\t: [\n\t\t\t\t\t\tthis.props.currentUser.roles.includes(\"ROLE_ADMIN\") && (\n\t\t\t\t\t\t\t<li><a href=\"/admin\" target=\"_blank\"><img src=\"/SVG/settings.svg\" className=\"icon\" alt=\"#\" /></a><span>Admin</span></li>\n\n\t\t\t\t\t\t),\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<li><Link to=\"/dashboard\"><img src=\"/SVG/dashboard.svg\" className=\"icon\" alt=\"#\" /></Link><span>Dashboard</span></li>\n\t\t\t\t\t\t\t<li onClick={() => this.logOut()}><img src=\"/SVG/logout.svg\" className=\"icon\" id=\"logout\" alt=\"#\" /><span>Logout</span></li>\n\t\t\t\t\t\t</>\n\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = state => ({\n\tcart: state.cart,\n\tcurrentUser: state.auth.currentUser\n});\n\nexport default connect(mapStateToProps)(HeaderBar);\n","import React, { useRef } from 'react';\nimport { useFrame } from \"react-three-fiber\";\nimport * as THREE from 'three'\n\nexport default function Galaxy() {\n  const ref = useRef()\n  useFrame(() => (ref.current.rotation.z += 0.001))\n  const texture = new THREE.TextureLoader().load('/img/galaxy2.png');\n  return (\n    <mesh ref={ref} position={[0, 1, 0]} rotation-x={Math.PI / 2}>\n      <planeBufferGeometry attach=\"geometry\" args={[1500, 1500, 1]} />\n      <meshBasicMaterial side={THREE.BackSide} transparent opacity={0.8} attach=\"material\" map={texture} />\n    </mesh>\n  )\n}","import React, { useRef, useMemo } from 'react';\nimport { useFrame } from \"react-three-fiber\";\n\nimport * as THREE from \"three\";\n\nexport default function SpiralGalaxy(props) {\n  let t = props.t\n  const ref = useRef()\n  useFrame(() => (ref.current.rotation.y -= 0.001))\n  const { iteration, floatSpread, distanceFactor, color } = props\n  const positions = useMemo(() => {\n    let positions = []\n    for (let y = 0; y < iteration; y++) {\n      t++\n      for (let i = 0; i < 1000; i++) {\n        const norm = i / 1000;\n        const theta = norm * Math.PI + t + THREE.Math.randFloatSpread(floatSpread);\n        const phi = THREE.Math.randFloatSpread(0.15)\n        const distance = norm * distanceFactor;\n        positions.push(distance * Math.sin(theta) * Math.cos(phi))\n        positions.push(distance * Math.sin(theta) * Math.sin(phi))\n        positions.push(distance * Math.cos(theta))\n      }\n    }\n    return new Float32Array(positions)\n  }, [iteration, floatSpread, t, distanceFactor])\n  return (\n    <points ref={ref}>\n      <bufferGeometry attach=\"geometry\">\n        <bufferAttribute\n          attachObject={['attributes', 'position']}\n          array={positions}\n          count={positions.length / 3}\n          itemSize={3}\n        />\n      </bufferGeometry>\n      <pointsMaterial attach=\"material\" color={color} />\n    </points>\n  )\n}\n","import React from 'react';\n\nimport SpiralGalaxy from './spiral-galaxy'\n\nexport default function Stars() {  // TODO\n  return (\n    <>\n      <SpiralGalaxy iteration={8} t={0} floatSpread={0.5} distanceFactor={1000} color={0xffffff} />\n      <SpiralGalaxy iteration={12} t={16} floatSpread={10} distanceFactor={1500} color=\"#51fcff\" /> // TODO\n      <SpiralGalaxy iteration={8} t={8} floatSpread={0.5} distanceFactor={500} color={0xffffff} />\n    </>\n  )\n}","import React, { createContext, useReducer } from 'react';\nimport * as THREE from \"three\";\n\nconst initialState = { hover: false, position: new THREE.Vector3(), zoom: false, loadingCategories: null, loadingShops: null, categories: [], shops: []};\nconst store = createContext(initialState);\nconst { Provider } = store;\n\nconst GalaxyProvider = ({ children }) => {\n  const [state, dispatch] = useReducer((state, action) => {\n    if(action.type === \"hover\") {\n      state.hover = action.hover\n      return state\n    } else if (action.type === \"position\") {\n      state.position = action.position\n      return state\n    } else if (action.type === \"zoom\") {\n      state.zoom = action.zoom\n      return state\n    } else if (action.type === \"history\") {\n      state.history = action.history\n      return state\n    } else if (action.type === \"categoriesLoaded\") {\n      return {\n        ...state,\n        loadingCategories: false,\n        categories: action.categories\n      }\n    } else if (action.type === \"shopsLoaded\") {\n      return {\n        ...state,\n        loadingShops: false,\n        shops: action.shops,\n        category: action.category\n      }\n    } else if (action.type === \"loadingCategories\") {\n      return {\n        ...state,\n        history: action.history,\n        loadingCategories: true\n      }\n    } else if (action.type === \"loadingShops\") {\n      return {\n        ...state,\n        history: action.history,\n        category_id: action.category_id,\n        loadingShops: true\n      }\n    } else {\n        throw new Error();\n    }\n  }, initialState);\n\n  return <Provider value={{ state, dispatch }}>{children}</Provider>;\n};\n\nexport { store, GalaxyProvider }","import { useContext } from 'react';\nimport { useThree, useFrame } from \"react-three-fiber\";\nimport lerp from 'lerp'\n\nimport { store } from '../store/GalaxyProvider';\n\nexport default function CameraController() {\n  const { state } = useContext(store);\n  const { camera } = useThree()\n  useFrame(() => {\n    if (state.zoom === false) {\n      camera.position.x = lerp(camera.position.x, -200, 0.08)\n      camera.position.y = lerp(camera.position.y, 400, 0.08)\n      camera.position.z = lerp(camera.position.z, 1000, 0.08)\n    }\n    else {\n      camera.position.x = lerp(camera.position.x, state.position.x, 0.08)\n      camera.position.y = lerp(camera.position.y, state.position.y, 0.08)\n      camera.position.z = lerp(camera.position.z, state.position.z, 0.08)\n    }\n    camera.updateProjectionMatrix()\n  })\n\n  // Zooms the cam from 100 to 7. Since it's inside the Suspense boundary, it will\n  // start doing that once everything's loaded/processed :]\n\n  return null\n}","import React, { useContext, useRef } from 'react';\nimport { Dom } from \"react-three-fiber\";\n\nimport * as THREE from \"three\";\n\nimport { store } from '../store/GalaxyProvider';\n\nexport default function SolarSystem(props) {\n  const globalState = useContext(store);\n  const { dispatch, state } = globalState;\n  const ref = useRef()\n  const texture = new THREE.TextureLoader().load('/img/flare.png');\n\n  const handleClick = (event) => {\n    if(typeof event.preventDefault !== \"undefined\") {\n      event.preventDefault(); //will stop the link href to call the blog page\n    }\n    state.position.setFromMatrixPosition(ref.current.matrixWorld);\n    dispatch({ type: \"zoom\", zoom: true })\n\n    setTimeout(function () {\n      state.history.push('/category/' + props.category_id)\n    }, 700); //will call the function after 2 secs.\n  }\n\n  return (\n    <mesh\n      ref={ref}\n      {...props}\n      onClick={handleClick} // TODO Show tooltip\n    >\n      <planeBufferGeometry attach=\"geometry\" args={[70, 70, 30]} />\n      <meshBasicMaterial side={THREE.BackSide} depthTest={false} transparent attach=\"material\" map={texture} />\n      <Dom>\n        <div onClick={handleClick}\n          style={{ cursor: 'pointer' }} className=\"content-planet-sdauhsdayudash\">\n          <a className=\"categories\" >{props.name}</a>\n        </div>\n      </Dom>\n    </mesh>\n  )\n}\n","import React, { useContext, useRef } from 'react';\nimport { useFrame } from \"react-three-fiber\";\n\nimport SolarSystem from './solar-system-mini'\n\nimport { store } from '../store/GalaxyProvider';\n\nexport default function PivotSphere() {\n  const ref = useRef()\n  const { state } = useContext(store);\n  useFrame(() => (ref.current.rotation.z += 0.001))\n  return (\n    <group>\n      <mesh ref={ref} position={[0, 1, 0]} rotation-x={Math.PI / 2}>\n        <planeBufferGeometry attach=\"geometry\" args={[1, 1, 1]} />\n        {[\n          { name: state.categories[0].name, category_id: state.categories[0].id, position: [400, 1, -50], \"rotation-z\": Math.PI / 2 },\n          { name: state.categories[1].name, category_id: state.categories[1].id, position: [2, 300, -50], \"rotation-z\": Math.PI / 2 },\n          { name: state.categories[2].name, category_id: state.categories[2].id, position: [30, -400, -50], \"rotation-z\": Math.PI / 3 },\n          { name: state.categories[3].name, category_id: state.categories[3].id, position: [-300, 0, -50], \"rotation-z\": Math.PI / 4 },\n          { name: state.categories[4].name, category_id: state.categories[4].id, position: [200, 200, -50], \"rotation-z\": Math.PI / 5 }\n        ].map(planetProps => (<SolarSystem key={planetProps.category_id} {...planetProps} />))}\n      </mesh>\n    </group>\n  )\n}","import React, { useEffect , useContext } from 'react';\nimport { Canvas } from \"react-three-fiber\";\n\nimport Galaxy from '../3d/galaxy'\nimport Stars from '../3d/stars'\nimport CameraController from '../3d/camera-controller'\nimport PivotSphere from '../3d/pivot-sphere-solar'\n\nimport { store, GalaxyProvider } from '../store/GalaxyProvider';\n\nfunction Content(props) {\n\tconst globalState = useContext(store);\n\tconst { dispatch } = globalState;\n\tuseEffect(() => {\n\t\tdispatch({ type: \"loadingCategories\", history: props.history })\n\t\tfetch(`${process.env.REACT_APP_API_URL}/categories`)\n\t\t\t.then(res => res.json())\n\t\t\t.then(res => {\n\t\t\t\tdispatch({ type: \"categoriesLoaded\", categories: res[\"hydra:member\"] })\n\t\t\t})\n\t}, [])\n\tif (globalState.state.loadingCategories === false) {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<Galaxy />\n\t\t\t\t<Stars />\n\t\t\t\t<PivotSphere />\n\t\t\t\t<CameraController />\n\t\t\t</React.Fragment>\n\t\t)\n\t} else {\n\t\treturn null\n\t}\n}\n\nexport default function (props) {\n\n\treturn (\n\t\t<Canvas\n\t\t\tstyle={{ position: \"absolute\", top: 0, backgroundColor: 'black', backgroundImage: 'url(/img/space.jpg)' }}\n\t\t\t// camera={{ position: [-200, 400, 1000], rotation: [-0.5, -0.2, -0.6], fov: 50, near: 100, far: 5000}}\n\t\t\tcamera={{ position: [-1000, 2000, 5000], rotation: [-0.5, -0.2, -0.6], fov: 50, near: 10, far: 10000 }}\n\t\t\tresize={{ scroll: false }}\n\t\t>\n\t\t\t<GalaxyProvider>\n\t\t\t\t<Content history={props.history} />\n\t\t\t</GalaxyProvider>\n\t\t</Canvas>\n\t)\n}","import React from 'react';\nimport Galaxy from '../components/galaxy';\n\nclass LandingPage extends React.Component{\n\n\t  render() {\n\t\t\treturn (\n\t\t\t\t<Galaxy history={this.props.history} />\n\t\t\t);\n\t\t}\n\t\t\n}\nexport default LandingPage;\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport {Redirect} from 'react-router-dom';\n\nexport default () => Component => {\n\tfunction RequiresLogin(props) {\n\t\tconst {authenticating, loggedIn, error, ...passThroughProps} = props;\n\t\tif (authenticating) {\n\t\t\treturn <div>Logging in...</div>;\n\t\t} else if (!loggedIn || error) {\n\t\t\treturn <Redirect to=\"/login\" />;\n\t\t}\n\n\t\treturn <Component {...passThroughProps} />;\n\t}\n\n\tconst displayName = Component.displayName || Component.name || 'Component';\n\tRequiresLogin.displayName = `RequiresLogin(${displayName})`;\n\n\tconst mapStateToProps = (state, props) => ({\n\t\tauthenticating: state.auth.loading,\n\t\tloggedIn: state.auth.currentUser !== null,\n\t\terror: state.auth.error\n\t});\n\n\treturn connect(mapStateToProps)(RequiresLogin);\n};\n","import React from 'react';\nimport { \n\tReferenceInput, \n\tReferenceField, \n\tTextField, \n\tAutocompleteInput,\n\tArrayInput,\n\tSimpleFormIterator,\n\tTextInput,\n\t// AutocompleteArrayInput ,\n\t// SelectArrayInput,\n\t// ReferenceFieldController\n} from \"react-admin\";\n\nimport { \n\tListGuesser,\n\tCreateGuesser,\n\tFieldGuesser,\n\tEditGuesser,\n\tInputGuesser,\n\tShowGuesser\n } from '@api-platform/admin';\n\n\nexport const Edit = props => (\n\t<EditGuesser  {...props}>\n\t\t<InputGuesser source=\"username\" />\n\t\t<InputGuesser source=\"email\" />\n\t\t{/*<InputGuesser source=\"roles\" />*/}\n\t\t{/*<AutocompleteArrayInput source=\"roles\" choices={['main', 'coauthor']} optionText={choice => choice} />*/}\n\t\t<ArrayInput source=\"roles\">\n\t\t\t<SimpleFormIterator>\n\t\t\t\t<TextInput />\n\t\t\t</SimpleFormIterator>\n\t\t</ArrayInput>\n\t\t<ReferenceInput\n\t\t\tsource=\"customer\"\n\t\t\treference=\"customers\"\n\t\t\tfilterToQuery={searchText => ({ name: searchText })}\n\t\t>\n\t\t\t<AutocompleteInput optionText=\"name\" />\n\t\t</ReferenceInput>\n\t\t<ReferenceInput\n\t\t\tsource=\"merchant\"\n\t\t\treference=\"merchants\"\n\t\t\tfilterToQuery={searchText => ({ name: searchText })}\n\t\t>\n\t\t\t<AutocompleteInput optionText=\"name\" />\n\t\t</ReferenceInput>\n\t\t<ReferenceInput\n\t\t\tsource=\"seller\"\n\t\t\treference=\"sellers\"\n\t\t\tfilterToQuery={searchText => ({ name: searchText })}\n\t\t>\n\t\t\t<AutocompleteInput optionText=\"name\" />\n\t\t</ReferenceInput>\n\t</EditGuesser >\n);\n\nexport const Create = props => (\n\t<CreateGuesser {...props}>\n\t\t<InputGuesser source=\"username\" />\n\t\t<InputGuesser source=\"email\" type=\"email\"/>\n\t\t<InputGuesser source=\"password\" type=\"password\"/>\n\t\t<InputGuesser source=\"roles\" />\n\t\t<ReferenceInput\n\t\t\tsource=\"customer\"\n\t\t\treference=\"customers\"\n\t\t\tfilterToQuery={searchText => ({ name: searchText })}\n\t\t>\n\t\t\t<AutocompleteInput optionText=\"name\" />\n\t\t</ReferenceInput>\n\t\t<ReferenceInput\n\t\t\tsource=\"merchant\"\n\t\t\treference=\"merchants\"\n\t\t\tfilterToQuery={searchText => ({ name: searchText })}\n\t\t>\n\t\t\t<AutocompleteInput optionText=\"name\" />\n\t\t</ReferenceInput>\n\t\t<ReferenceInput\n\t\t\tsource=\"seller\"\n\t\t\treference=\"sellers\"\n\t\t\tfilterToQuery={searchText => ({ name: searchText })}\n\t\t>\n\t\t\t<AutocompleteInput optionText=\"name\" />\n\t\t</ReferenceInput>\n\t</CreateGuesser>\n);\n\nexport const List = props => (\n\t<ListGuesser {...props}>\n\t\t<FieldGuesser source=\"username\" />\n\t\t<FieldGuesser source=\"email\" />\n\t\t<FieldGuesser source=\"roles\" />\n\t\t<ReferenceField\n\t\t\tsource=\"customer\"\n\t\t\treference=\"customers\"\n\t\t>\n\t\t\t<TextField source=\"name\" />\n\t\t</ReferenceField>\n\t\t<ReferenceField\n\t\t\tsource=\"merchant\"\n\t\t\treference=\"merchants\"\n\t\t>\n\t\t\t<TextField source=\"name\" />\n\t\t</ReferenceField>\n\t\t<ReferenceField\n\t\t\tsource=\"seller\"\n\t\t\treference=\"sellers\"\n\t\t>\n\t\t\t<TextField source=\"name\" />\n\t\t</ReferenceField>\n\t</ListGuesser>\n);\n\nexport const Show = props => (\n\t<ShowGuesser {...props}>\n\t\t<FieldGuesser source=\"id\" addLabel={true} />\n\t\t<FieldGuesser source=\"username\" addLabel={true} />\n\t\t<FieldGuesser source=\"email\" addLabel={true} />\n\t\t<FieldGuesser source=\"roles\" addLabel={true} />\n\t\t<ReferenceField\n\t\t\tsource=\"customer\"\n\t\t\treference=\"customers\"\n\t\t>\n\t\t\t<TextField source=\"name\" />\n\t\t</ReferenceField>\n\t\t<ReferenceField\n\t\t\tsource=\"merchant\"\n\t\t\treference=\"merchants\"\n\t\t>\n\t\t\t<TextField source=\"name\" />\n\t\t</ReferenceField>\n\t\t<ReferenceField\n\t\t\tsource=\"seller\"\n\t\t\treference=\"sellers\"\n\t\t>\n\t\t\t<TextField source=\"name\" />\n\t\t</ReferenceField>\n\t</ShowGuesser>\n);","import React from 'react';\n\nimport { Redirect } from 'react-router-dom';\n\nimport {connect} from 'react-redux';\nimport requiresLogin from '../components/requires-login';\n\nimport { \n\tHydraAdmin, \n\tResourceGuesser,\n\tdataProvider as baseDataProvider, \n\tfetchHydra as baseFetchHydra \n } from '@api-platform/admin';\n\nimport parseHydraDocumentation from '@api-platform/api-doc-parser/lib/hydra/parseHydraDocumentation';\n\nimport {\n\tShoppingCart, \n\tAddShoppingCart, \n\tClass, \n\tPerson, \n\tVerifiedUser, \n\tApps, \n\tRecordVoiceOver, \n\tFormatListBulleted, \n\tStore, \n\tGridOn\n} from '@material-ui/icons';\nimport UsersIcon from '@material-ui/icons/Group';\n\nimport * as UsersGuesser from '../components/users-guesser';\n\n\nconst fetchHydra = (url, options = {}) => baseFetchHydra(url, {\n\t\t...options,\n\t\theaders: new Headers({'Authorization': `Bearer ${localStorage.getItem('token')}`}),\n});\nconst apiDocumentationParser = entrypoint => parseHydraDocumentation(entrypoint, { headers: new Headers({'Authorization': `Bearer ${localStorage.getItem('token')}`}) })\n\t\t.then(\n\t\t\t\t({ api }) => ({api}),\n\t\t\t\t(result) => {\n\t\t\t\t\t\tswitch (result.status) {\n\t\t\t\t\t\t\t\tcase 401:\n\t\t\t\t\t\t\t\t\t\treturn Promise.resolve({\n\t\t\t\t\t\t\t\t\t\t\t\tapi: result.api,\n\t\t\t\t\t\t\t\t\t\t\t\tcustomRoutes: [{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpath: '/',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trender: () => <Redirect to={`/login`}/>,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t}],\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\treturn Promise.reject(result);\n\t\t\t\t\t\t}\n\t\t\t\t},\n\t\t);\n\nconst dataProvider = baseDataProvider(process.env.REACT_APP_API_URL, fetchHydra, apiDocumentationParser);\n\nexport class AdminPage extends React.Component {\n\trender() {\n\t\tif(this.props.roles.includes(\"ROLE_ADMIN\") === false) {\n\t\t\treturn \"Unauthorized access\"\n\t\t}\n\t\treturn (\n\t\t\t<HydraAdmin\n\t\t\t\tloginPage={false}\n\t\t\t\tapiDocumentationParser={ apiDocumentationParser }\n\t\t\t\tdataProvider={ dataProvider }\n\t\t\t\tentrypoint={ process.env.REACT_APP_API_URL }\n\t\t\t>\n\t\t\t\t<ResourceGuesser name=\"carts\" \n\t\t\t\t\ticon={ShoppingCart} \n\t\t\t\t/>\n\t\t\t\t<ResourceGuesser name=\"cart_items\" \n\t\t\t\t\ticon={AddShoppingCart}\n\t\t\t\t/>\n\t\t\t\t<ResourceGuesser name=\"categories\" \n\t\t\t\t\ticon={Class} \n\t\t\t\t/>\n\t\t\t\t<ResourceGuesser name=\"customers\" \n\t\t\t\t\ticon={Person} \n\t\t\t\t/>\n\t\t\t\t<ResourceGuesser name=\"merchants\" \n\t\t\t\t\ticon={VerifiedUser} \n\t\t\t\t/>\n\t\t\t\t<ResourceGuesser name=\"products\" \n\t\t\t\t\ticon={Apps} \n\t\t\t\t/>\n\t\t\t\t<ResourceGuesser name=\"sellers\" \n\t\t\t\t\ticon={RecordVoiceOver} \n\t\t\t\t/>\n\t\t\t\t<ResourceGuesser name=\"seller_items\" \n\t\t\t\t\ticon={FormatListBulleted}\n\t\t\t\t/>\n\t\t\t\t<ResourceGuesser name=\"shops\" \n\t\t\t\t\ticon={Store}\n\t\t\t\t/>\n\t\t\t\t<ResourceGuesser name=\"shop_items\" \n\t\t\t\t\ticon={GridOn} \n\t\t\t\t/>\n\t\t\t\t<ResourceGuesser name=\"users\" \n\t\t\t\t\tlist={UsersGuesser.List}\n\t\t\t\t\tcreate={UsersGuesser.Create}\n\t\t\t\t\tedit={UsersGuesser.Edit}\n\t\t\t\t\tshow={UsersGuesser.Show}\n\t\t\t\t\ticon={UsersIcon}\n\t\t\t\t/>\n\t\t\t</HydraAdmin>\t\n\t\t);\n\t}\n}\n\nconst mapStateToProps = state => {\n\tconst {currentUser} = state.auth;\n\treturn {\n\t\tusername: currentUser.username,\n\t\temail: currentUser.email,\n\t\troles: currentUser.roles\n\t};\n};\n\nexport default requiresLogin()(connect(mapStateToProps)(AdminPage));","import React from 'react';\nimport {Link} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport requiresLogin from '../components/requires-login';\n// import {fetchProtectedData} from '../actions/protected-data';\n\nexport class DashboardPage extends React.Component {\n/*\tcomponentDidMount() {\n\t\tthis.props.dispatch(fetchProtectedData());\n\t}*/\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"dashboard\">\n\t\t\t\t<div className=\"dashboard-username\">\n\t\t\t\t\tUsername: {this.props.username}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"dashboard-email\">\n\t\t\t\t\tEmail: {this.props.email}\n\t\t\t\t</div>\n{/*\t\t\t\t<div className=\"dashboard-protected-data\">\n\t\t\t\t\tProtected data: {this.props.protectedData}\n\t\t</div>*/}\n\t\t<Link to='/orders'>Orders</Link>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = state => {\n\tconst {currentUser} = state.auth;\n\treturn {\n\t\tusername: currentUser.username,\n\t\temail: currentUser.email,\n\t\tprotectedData: state.protectedData.data\n\t};\n};\n\nexport default requiresLogin()(connect(mapStateToProps)(DashboardPage));\n","import React from 'react';\n\nexport default class Input extends React.Component {\n    componentDidUpdate(prevProps) {\n        if (!prevProps.meta.active && this.props.meta.active) {\n            this.input.focus();\n        }\n    }\n\n    render() {\n        let error;\n        if (this.props.meta.touched && this.props.meta.error) {\n            error = <div className=\"form-error\">{this.props.meta.error}</div>;\n        }\n\n        let warning;\n        if (this.props.meta.touched && this.props.meta.warning) {\n            warning = (\n                <div className=\"form-warning\">{this.props.meta.warning}</div>\n            );\n        }\n\n        return (\n            <div className=\"form-input\">\n                {error}\n                {warning}\n                <input\n                    {...this.props.input}\n                    id={this.props.input.name}\n                    type={this.props.type}\n                    placeholder={this.props.placeholder}\n                    ref={input => (this.input = input)}\n                />\n            </div>\n        );\n    }\n}\n","export const required = value => (value ? undefined : 'Obligatoire');\nexport const nonEmpty = value =>\n    value.trim() !== '' ? undefined : 'Cannot be empty';\nexport const isTrimmed = value =>\n    value.trim() === value ? undefined : 'Cannot start or end with whitespace';\nexport const length = length => value => {\n    if (length.min && value.length < length.min) {\n        return `Must be at least ${length.min} characters long`;\n    }\n    if (length.max && value.length > length.max) {\n        return `Must be at most ${length.max} characters long`;\n    }\n};\nexport const matches = field => (value, allValues) =>\n    field in allValues && value.trim() === allValues[field].trim()\n        ? undefined\n        : 'Does not match';\n","import React from 'react';\nimport {Field, reduxForm, focus} from 'redux-form';\nimport {registerUser} from '../actions/users';\nimport {login} from '../actions/auth';\nimport Input from './input';\nimport '../index.css';\nimport {required, nonEmpty, matches, length, isTrimmed} from '../validators';\n\nconst passwordLength = length({min: 10, max: 72});\nconst matchesPassword = matches('password');\n\nexport class RegistrationForm extends React.Component {\n    onSubmit(values) {\n        const {username, email, password } = values;\n        const user = {username, email, password };\n        return this.props\n            .dispatch(registerUser(user))\n            .then(() => this.props.dispatch(login(email, password)));\n    }\n\n    render() {\n        return (\n            <form\n                className=\"login-form\"\n                onSubmit={this.props.handleSubmit(values =>\n                    this.onSubmit(values)\n                )}>\n                <h2>Register for Univershop</h2>\n                <Field\n                    component={Input}\n                    type=\"text\"\n                    placeholder=\"Username\"\n                    name=\"username\"\n                    validate={[required, nonEmpty, isTrimmed]}\n                />\n                <Field\n                    component={Input}\n                    type=\"email\"\n                    name=\"email\"\n                    placeholder=\"Email\"\n                    validate={[required, nonEmpty, isTrimmed]}\n                />\n                <Field\n                    component={Input}\n                    type=\"password\"\n                    placeholder=\"Password\"\n                    name=\"password\"\n                    validate={[required, passwordLength, isTrimmed]}\n                />\n                <Field\n                    component={Input}\n                    type=\"password\"\n                    placeholder=\"Confirm password\"\n                    name=\"passwordConfirm\"\n                    validate={[required, nonEmpty, matchesPassword]}\n                />\n                <button\n                    type=\"submit\"\n                    disabled={this.props.pristine || this.props.submitting}>\n                    Register\n                </button>\n            </form>\n        );\n    }\n}\n\nexport default reduxForm({\n    form: 'registration',\n    onSubmitFail: (errors, dispatch) =>\n        dispatch(focus('registration', Object.keys(errors)[0]))\n})(RegistrationForm);\n","import {SubmissionError} from 'redux-form';\n\nimport {normalizeResponseErrors} from './utils';\n\nexport const registerUser = user => dispatch => {\n\treturn fetch(`${process.env.REACT_APP_API_URL}/users`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'content-type': 'application/json'\n\t\t},\n\t\tbody: JSON.stringify(user)\n\t})\n\t\t.then(res => normalizeResponseErrors(res))\n\t\t.then(res => res.json())\n\t\t.catch(err => {\n\t\t\tconst {reason, message, location} = err;\n\t\t\tif (reason === 'ValidationError') {\n\t\t\t\t// Convert ValidationErrors into SubmissionErrors for Redux Form\n\t\t\t\treturn Promise.reject(\n\t\t\t\t\tnew SubmissionError({\n\t\t\t\t\t\t[location]: message\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t});\n};\n\nexport const registerCustomer = customer => (dispatch, getState) => {\n\tconst authToken = getState().auth.token;\n\treturn fetch(`${process.env.REACT_APP_API_URL}/customers`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'content-type': 'application/json',\n\t\t\tAuthorization: `Bearer ${authToken}`\n\t\t},\n\t\tbody: JSON.stringify(customer)\n\t})\n\t\t.then(res => normalizeResponseErrors(res))\n\t\t.then(res => res.json())\n\t\t.catch(err => {\n\t\t\tconst {reason, message, location} = err;\n\t\t\tif (reason === 'ValidationError') {\n\t\t\t\t// Convert ValidationErrors into SubmissionErrors for Redux Form\n\t\t\t\treturn Promise.reject(\n\t\t\t\t\tnew SubmissionError({\n\t\t\t\t\t\t[location]: message\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t});\n};\n\nexport const registerCard = card => (dispatch, getState) => {\n\tconst authToken = getState().auth.token;\n\treturn fetch(`${process.env.REACT_APP_API_URL}/customers`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'content-type': 'application/json',\n\t\t\tAuthorization: `Bearer ${authToken}`\n\t\t},\n\t\tbody: JSON.stringify(card)\n\t})\n\t\t.then(res => normalizeResponseErrors(res))\n\t\t.then(res => res.json())\n\t\t.catch(err => {\n\t\t\tconst {reason, message, location} = err;\n\t\t\tif (reason === 'ValidationError') {\n\t\t\t\t// Convert ValidationErrors into SubmissionErrors for Redux Form\n\t\t\t\treturn Promise.reject(\n\t\t\t\t\tnew SubmissionError({\n\t\t\t\t\t\t[location]: message\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t});\n};\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport {Redirect} from 'react-router-dom';\n\nimport RegistrationForm from '../components/registration-form';\n\nexport function RegistrationPage(props) {\n\t// If we are logged in (which happens automatically when registration\n\t// is successful) redirect to the user's dashboard\n\tif (props.loggedIn) {\n\t\treturn <Redirect to=\"/dashboard\" />;\n\t}\n\treturn (\n\t\t<div className=\"home\">\n\t\t\t<RegistrationForm />\n\t\t</div>\n\t);\n}\n\nconst mapStateToProps = state => ({\n\tloggedIn: state.auth.currentUser !== null\n});\n\nexport default connect(mapStateToProps)(RegistrationPage);\n","import React from 'react';\nimport {Field, reduxForm, focus} from 'redux-form';\nimport Input from './input';\nimport {login} from '../actions/auth';\nimport {required, nonEmpty} from '../validators';\nimport {Link} from 'react-router-dom';\n\n\nexport class LoginForm extends React.Component {\n\tonSubmit(values) {\n\t\treturn this.props.dispatch(login(values.email, values.password));\n\t}\n\n\trender() {\n\t\tlet error;\n\t\tif (this.props.error) {\n\t\t\terror = (\n\t\t\t\t<div className=\"form-error\" aria-live=\"polite\">\n\t\t\t\t\t{this.props.error}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<form\n\t\t\t\tclassName=\"login-form\"\n\t\t\t\tonSubmit={this.props.handleSubmit(values =>\n\t\t\t\t\tthis.onSubmit(values)\n\t\t\t\t)}>\n\t\t\t\t<h2>Login for Univershop</h2>\n\t\t\t\t{error}\n\t\t\t\t<Field\n\t\t\t\t\tcomponent={Input}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"email\"\n\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t\tid=\"email\"\n\t\t\t\t\tvalidate={[required, nonEmpty]}\n\t\t\t\t/>\n\t\t\t\t<Field\n\t\t\t\t\tcomponent={Input}\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tname=\"password\"\n\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t\tid=\"password\"\n\t\t\t\t\tvalidate={[required, nonEmpty]}\n\t\t\t\t/>\n\t\t\t\t<div className=\"form-bottom\">\n\t\t\t\t\t<button disabled={this.props.pristine || this.props.submitting}>\n\t\t\t\t\t\tLog in\n\t\t\t\t\t</button>\n\t\t\t\t\t<Link to=\"/register\">Pas encore inscrit ?</Link>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t\t\n\t\t);\n\t}\n}\n\nexport default reduxForm({\n\tform: 'login',\n\tonSubmitFail: (errors, dispatch) => dispatch(focus('login', 'email'))\n})(LoginForm);\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport {Redirect} from 'react-router-dom';\n\nimport LoginForm from '../components/login-form';\n\nexport function LoginPage(props) {\n\t\tif (props.loggedIn) {\n\t\t\t\treturn <Redirect to=\"/dashboard\" />;\n\t\t}\n\t\treturn (\n\t\t\t\t<div className=\"home\">\n\t\t\t\t\t\t<LoginForm />\n\t\t\t\t</div>\n\t\t);\n}\n\nconst mapStateToProps = state => ({\n\t\tloggedIn: state.auth.currentUser !== null\n});\n\nexport default connect(mapStateToProps)(LoginPage);\n","import React, { useRef } from 'react';\nimport { useFrame } from \"react-three-fiber\";\n\nimport * as THREE from \"three\";\n\nexport default function System() {\n  const ref = useRef()\n  useFrame(() => (ref.current.rotation.y += 0.002))\n  const texture = new THREE.TextureLoader().load('/img/2k_sun.jpg');\n  return (\n    <mesh ref={ref} position={[0, 1, 0]} rotation-y={Math.PI / 2}>\n      <sphereGeometry attach=\"geometry\" args={[100, 100, 100]} />\n      <meshBasicMaterial attach=\"material\" map={texture} />\n    </mesh>\n  )\n}","import React, { useContext, useRef } from 'react';\nimport { Dom } from \"react-three-fiber\";\n\nimport { store } from '../store/GalaxyProvider';\n\nfunction getRandomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nexport default function Planet(props) {\n\n  const globalState = useContext(store);\n  const { dispatch, state } = globalState;\n  const ref = useRef()\n\n  // var texturesList = [\n  //   '/img/planetTexture/2k_jupiter.jpg',\n  //   '.img/planetTexture/2k_mars.jpg',\n  //   '/img/planetTexture/2k_saturn.jpg',\n  //   '/img/planetTexture/2k_venus_atmosphere.jpg',\n  //   '/img/planetTexture/2k_mercury.jpg'\n\n  // ];\n  // var randIndex = getRandomInt(0, texturesList.length - 1);\n  // var randTexture = new THREE.TextureLoader().load(texturesList[randIndex]);\n\n  const handleClick = (event) => {\n    if (typeof event.preventDefault !== \"undefined\") {\n      event.preventDefault(); //will stop the link href to call the blog page\n    }\n    state.position.setFromMatrixPosition(ref.current.matrixWorld);\n    dispatch({ type: \"zoom\", zoom: true })\n    setTimeout(function () {\n      state.history.push('/category/' + state.category_id + '/shop/' + props.shop_id)\n    }, 700); //will call the function after 2 secs.\n  }\n\n  return (\n    <mesh rotation-y={Math.PI / 2}\n      ref={ref}\n      onClick={handleClick}\n      {...props}\n\n    >\n      <sphereGeometry attach=\"geometry\" args={[getRandomInt(20, 40), 20, 30]} />\n      <meshLambertMaterial attach=\"material\" color='grey' />\n      <Dom>\n        <div onClick={handleClick}\n          style={{ cursor: 'pointer' }} className=\"content-planet-sdauhsdayudash\">\n          <a className=\"categories\">{props.shop_name}</a>\n        </div>\n      </Dom>\n    </mesh>\n  )\n}","import React, { useContext, useRef } from 'react';\nimport { useFrame } from \"react-three-fiber\";\n\nimport { store } from '../store/GalaxyProvider';\n\nimport Planet from './planet'\n\nfunction randomIntFromInterval(min, max) { // min and max included \n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nexport default function PivotSphere(props) {\n  const { state } = useContext(store);\n  const ref = useRef()\n  useFrame(() => {\n    if (state.hover === false) { ref.current.rotation.z += 0.002 }\n  })\n\n  return (\n    <group>\n      <mesh ref={ref} position={[0, 1, 0]} rotation-x={Math.PI / 2}>\n        <planeBufferGeometry attach=\"geometry\" args={[1, 1, 1]} />\n        {state.shops.map(shop => (\n          <Planet key={shop.id} shop_id={shop.id} shop_name={shop.name} position={[randomIntFromInterval(400, -400), randomIntFromInterval(400, -400), 0]} {...props} />\n        ))}\n      </mesh>\n    </group>\n  )\n}","import { useContext } from 'react';\nimport { useThree, useFrame } from \"react-three-fiber\";\nimport lerp from 'lerp'\n\nimport { store } from '../store/GalaxyProvider';\n\nexport default function Controls() {\n  const { state } = useContext(store);\n  const { camera } = useThree()\n\n  useFrame(() => {\n    if (state.zoom === false) {\n      camera.position.x = lerp(camera.position.x, -150, 0.08)\n      camera.position.y = lerp(camera.position.y, 300, 0.08)\n      camera.position.z = lerp(camera.position.z, 750, 0.08)\n    }\n    else {\n      camera.position.x = lerp(camera.position.x, state.position.x, 0.08)\n      camera.position.y = lerp(camera.position.y, state.position.y, 0.08)\n      camera.position.z = lerp(camera.position.z, state.position.z, 0.08)\n    }\n    camera.updateProjectionMatrix()\n  })\n\n  return null\n}","import React, { useEffect, useContext } from 'react';\nimport { Canvas, extend} from \"react-three-fiber\";\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\nimport { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass';\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass';\n\nimport System from '../3d/solar-system'\nimport PivotSphere from '../3d/pivot-sphere-planets'\nimport Controls from '../3d/controls'\n\nimport { store, GalaxyProvider } from '../store/GalaxyProvider';\n\nextend({ OrbitControls, UnrealBloomPass, EffectComposer, RenderPass })\n\nfunction Content(props) {\n\tconst globalState = useContext(store);\n\tconst { dispatch } = globalState;\n\tuseEffect(() => {\n\t\tdispatch({ type: \"loadingShops\", history: props.history, category_id: props.category_id })\n\t\tfetch(`${process.env.REACT_APP_API_URL}/shops?category=${props.category_id}`)\n\t\t\t.then(res => res.json())\n\t\t\t.then(res => {\n\t\t\t\tdispatch({ type: \"shopsLoaded\", shops: res[\"hydra:member\"] })\n\t\t\t})\n\t}, [])\n\tif (globalState.state.loadingShops === false) {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<pointLight position={[1, 1, 1]} />\n\t\t\t\t<ambientLight intensity={0.2} />\n\t\t\t\t<System />\n\t\t\t\t<PivotSphere />\n\t\t\t\t<Controls />\n\t\t\t</React.Fragment>\n\t\t)\n\t} else {\n\t\treturn null\n\t}\n}\n\nexport default function (props) {\n\treturn (\n\t\t<Canvas\n\t\t\tonCreated={({ camera }) => camera.lookAt(0, 0, 0)}\n\t\t\tstyle={{ position: \"absolute\", top: 0, backgroundImage: 'url(/img/space.jpg)' }}\n\t\t\tcamera={{ position: [-1000, 2000, 5000], fov: 50, near: 100, far: 5000 }}\n\t\t\tresize={{ scroll: false }}\n\t\t>\n\t\t\t<GalaxyProvider>\n\t\t\t\t<Content history={props.history} category_id={props.category_id} />\n\t\t\t</GalaxyProvider>\n\t\t</Canvas>\n\t)\n}","import React from 'react';\nimport SolarSystem from '../components/solar-system';\n\nexport default class ShopsPage extends React.Component {\n\n    render() {\n        return <SolarSystem history={this.props.history} category_id={this.props.match.params.id} />\n    }\n}","import React from 'react';\nimport { connect } from 'react-redux'\nimport { Link } from 'react-router-dom';\nimport Datasort from 'react-data-sort'\n\nclass ShopPage extends React.Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            shopItems: [],\n            loading: null,\n            sortBy: \"name\",\n            direction: \"asc\",\n            activePage: 0,\n            searchQuery: ''\n        }\n    }\n\n    async componentDidMount() {\n        this.setState({ loading: true })\n        const fetchText = url => fetch(url).then(r => r.json()); // 1\n        const /*2*/[shop, resShopItems] = /*3*/ await Promise.all([\n            fetchText(`${process.env.REACT_APP_API_URL}api/shops/${this.props.match.params.shop_id}`),\n            fetchText(`${process.env.REACT_APP_API_URL}/shop_items?shop=${this.props.match.params.shop_id}`)\n        ]);\n        this.setState({ loading: false, shop, shopItems: resShopItems[\"hydra:member\"]});\n    }\n\n    addCart(product) {\n        this.props.dispatch({\n            type: \"ADD_PRODUCT\",\n            product: { ...product, quantity: 1 }\n        })\n    }\n\n    setSortBy = sortBy => {\n        this.setState({ sortBy });\n    };\n\n    toggleDirection = () => {\n        this.setState({\n            direction: this.state.direction === \"asc\" ? \"desc\" : \"asc\"\n        });\n    };\n\n    goToPage = activePage => {\n        this.setState({ activePage });\n    };\n\n    prevPage = () => {\n        this.setState(({ activePage }) => ({\n            activePage: activePage - 1\n        }));\n    };\n\n    nextPage = () => {\n        this.setState(({ activePage }) => ({\n            activePage: activePage + 1\n        }));\n    };\n\n    render() {\n        const { sortBy, direction, activePage, searchQuery } = this.state;\n        if (this.state.loading === false) {\n            if(this.state.shopItems.length >= 1) {\n                return (\n                    <Datasort\n                        data={this.state.shopItems}\n                        sortBy={sortBy}\n                        direction={direction}\n                        activePage={activePage}\n                        searchQuery={searchQuery}\n                        paginate\n                        render={({ data, pages }) => {\n                            return (\n                                <div>\n                                    <Links\n                                        setSortBy={this.setSortBy}\n                                        sortBy={sortBy}\n                                        direction={direction}\n                                        toggleDirection={this.toggleDirection}\n                                    />\n                                    <h2>\n                                        {this.state.shop.name}\n                                    </h2>\n                                    <Content data={data} addCart={this.addCart.bind(this)} />\n                                    <Flex style={{ justifyContent: \"space-between\" }}>\n                                        <GoToPage goToPage={this.goToPage} pages={pages} />\n                                        <PageIndicator pages={pages} activePage={activePage} />\n                                        <Navigation\n                                            activePage={activePage}\n                                            goToPage={this.goToPage}\n                                            nextPage={this.nextPage}\n                                            prevPage={this.prevPage}\n                                            pages={pages}\n                                        />\n                                    </Flex>\n                                </div>\n                            );\n                        }}\n                    />\n                );   \n            } else {\n                return (\n                    \"Ce shop n'a pas de produit en vente actuellement\"\n                )\n            }\n        } else if(this.state.loading === true) {\n            return \"Loading...\"\n        } else {\n            return null\n        }\n    }\n}\n\nfunction Links({ setSortBy, sortBy, direction, toggleDirection }) {\n    const columns = [\n        { key: \"id\", title: \"ID\" },\n        { key: \"name\", title: \"Name\" },\n        { key: \"description\", title: \"Description\" },\n        { key: \"price\", title: \"Price\" },\n\n    ];\n    const items = columns.map(({ key, title }) => {\n        const active = key === sortBy;\n        return (\n            <ToggleLink\n                key={key}\n                active={active}\n                onClick={() => {\n                    if (active) {\n                        toggleDirection();\n                    }\n                    setSortBy(key);\n                }}\n            >\n                {title} {active ? direction === \"asc\" ? \"\" : \"\" : null}\n            </ToggleLink>\n        );\n    });\n    return (\n        <div style={{display: \"grid\", gridGap: \"5px\", gridAutoflow: \"column\"}}>\n            <div>Sort by</div>\n             {items}\n        </div>\n    );\n}\n\nfunction ToggleLink({ children, active, onClick }) {\n    return (\n        <div\n            onClick={onClick}\n            style={{ fontWeight: active ? \"bold\" : \"normal\", cursor: \"pointer\" }}\n        >\n            {children}\n        </div>\n    );\n}\n\nfunction Content({ data, addCart }) {\n    return (\n        <section id=\"productList\">\n            {data.map(({ product }) => (\n            <div key={product.id} class=\"containerProductList\">\n                <img src='https://fakeimg.pl/100x100/282828/F2F4F3' style={{width: 100, height: 100}} alt={product.name} />\n                <h2><Link to={`/product/${product.id}`}>{product.name}</Link></h2>\n                <p>{product.description}</p>\n                <h3>{product.price} &euro;</h3>\n                <button className=\"addToCart\" onClick={() => addCart(product)}><img src=\"/SVG/basket.svg\" style={{width: 15, height: 15}} alt={product.name} />Ajouter au panier</button>\n            </div>\n            ))}\n        </section>\n    );\n}\n\nfunction Flex({ children, style }) {\n    return <div style={{ display: \"flex\", ...style }}>{children}</div>;\n}\n\nfunction GoToPage({ goToPage, pages }) {\n    const options = [];\n    for (let i = 0; i < pages; i++) {\n        options.push(<option key={i} value={i}>{i + 1}</option>);\n    }\n    return (\n        <div>\n            Go to page{\" \"}\n            <select onChange={e => goToPage(parseInt(e.target.value))}>\n                {options}\n            </select>\n        </div>\n    );\n}\n\nfunction Navigation({ activePage = 0, goToPage, nextPage, prevPage, pages }) {\n    return (\n        <Flex>\n            <button disabled={activePage === 0} onClick={() => goToPage(0)}>\n                {\"<<\"}\n            </button>\n            <button disabled={activePage === 0} onClick={prevPage}>\n                {\"<\"}\n            </button>\n\n            <button disabled={activePage === pages - 1} onClick={nextPage}>\n                {\">\"}\n            </button>\n            <button\n                disabled={activePage === pages - 1}\n                onClick={() => goToPage(pages - 1)}\n            >\n                {\">>\"}\n            </button>\n        </Flex>\n    );\n}\n\nfunction PageIndicator({ pages, activePage = 0}) {\n    return (\n        <div>\n            <b>{activePage + 1}</b> / {pages}\n        </div>\n    );\n}\n\nexport default connect()(ShopPage);","import React from 'react';\nimport '../loading.css';\n\nexport default class Loading extends React.Component {\n    render() {\n        return (\n            <>\n            <div className=\"about\">\n                <a class=\"bg_links social portfolio\" href=\"https://www.rafaelalucas.com\" rel=\"noopener noreferrer\" target=\"_blank\">\n                    <span class=\"icon\"></span>\n                </a>\n                <a class=\"bg_links social dribbble\" href=\"https://dribbble.com/rafaelalucas\" rel=\"noopener noreferrer\" target=\"_blank\">\n                    <span class=\"icon\"></span>\n                </a>\n                <a class=\"bg_links social linkedin\" href=\"https://www.linkedin.com/in/rafaelalucas/\" rel=\"noopener noreferrer\" target=\"_blank\">\n                    <span class=\"icon\"></span>\n                </a>\n                <a class=\"bg_links logo\"></a>\n            </div>\n\n            <div className=\"content\">\n                <div className=\"planet\">\n                    <div className=\"ring\"></div>\n                        <div className=\"cover-ring\"></div>\n                    <div className=\"spots\">\n                        <span></span>\n                        <span></span>\n                        <span></span>\n                        <span></span>\n                        <span></span>\n                        <span></span>\n                        <span></span>\n\n                    </div>\n                </div>\n                <p>loading</p>\n            </div>\n            </>\n        );\n    }\n}\n","import React from 'react';\nimport { connect } from 'react-redux'\nimport Loading from '../components/loading'\n\nclass ProductPage extends React.Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            loading: null,\n            productdetail: []\n        }\n    }\n\n    \n    componentDidUpdate(prevProps) {\n        if(this.props.match.params.product_id !== prevProps.match.params.product_id ) {\n            this.fetchCart()\n        }\n    }\n\n\n    componentDidMount(){\n        this.fetchCart()\n    }\n\n    fetchCart() {\n        this.setState({\n            loading: true,\n        })     \n        fetch(`${process.env.REACT_APP_API_URL}/products?id=${this.props.match.params.product_id}`)\n        .then(res => res.json())\n        .then(res => {\n             this.setState({\n                 loading: false,\n                productdetail: res[\"hydra:member\"]\n             })             \n        })\n    }\n\n    addCart(product) {\n        this.props.dispatch({\n            type: \"ADD_PRODUCT\",\n            product: {...product, quantity: 1}\n        })\n        // let cart = JSON.parse(localStorage.getItem(\"cart\"))\n        // if (Array.isArray(cart) === false) {\n        //     cart = []\n        // }\n        // cart.push(product)\n        //  // sauvegarde les modifications\n        // localStorage.setItem(\"cart\", JSON.stringify(cart))\n        // fetch(`${process.env.REACT_APP_API_URL}/cart_items`, {\n\t\t// \tmethod: 'POST',\n\t\t// \theaders: {\n\t\t// \t\t'Content-Type': 'application/json'\n\t\t// \t},\n\t\t// \tbody: JSON.stringify({\n        //         cart:\"${process.env.REACT_APP_API_URL}/carts/2\",\n        //         quantity:1,\n        //         product:`${process.env.REACT_APP_API_URL}/products/${productId}`})\n        // })\n    }\n\n    render() {\n        if(this.state.loading === false) {\n            const Products = this.state.productdetail.map(product => (\n                <div key={product.id}>\n                <h2>{product.name}</h2>\n                <h4>{product.description}</h4>\n                <h4>{product.price}</h4>\n                <h4>{product.images}</h4>\n                <h4>{console.log(product.images)}</h4>\n                <button className=\"addToCart\" onClick={() => this.addCart(product)}>Ajouter au panier</button>\n                </div>\n            ))\n            return <>\n            {Products}\n            </>\n            ;\n        } else {\n            return (<Loading />)\n        }\n        \n    }\n}\n\nexport default connect()(ProductPage);","import React from 'react';\nimport { connect } from 'react-redux';\n\nclass CartItem extends React.Component {\n\n    render() {\n        return (\n            \n             <div className=\"Product\">\n                <div style={{width: 100,textAlign: 'center'}}>\n                    <img src='https://fakeimg.pl/100x100/282828/F2F4F3' alt={this.props.product.name} style={{borderRadius: 15}} />\n                    <div className=\"itemsQuantity\">\n                        <img src=\"/SVG/minus-solid.svg\" onClick={() => {\n                            this.props.dispatch({\n                                type: \"DELETE_PRODUCT\",\n                                product: this.props.product\n                            })\n                        }} className=\"icon minus\" alt='#'/>\n                        <p>{this.props.product.quantity}</p>\n                        <img src=\"/SVG/plus-solid.svg\" onClick={() => {\n                        this.props.dispatch({\n                            type: \"ADD_PRODUCT\",\n                            product: this.props.product\n                        })}} className=\"icon add\" alt='#'/>\n                    </div>\n                </div>\n\n                <div className=\"Content\">\n                    <h1>{this.props.product.name}</h1> \n                    <p>{this.props.product.description}</p>\n                    <p style={{fontSize: '0.9rem'}}><strong>Prix unit : </strong> {this.props.product.price} &euro;</p>\n                    <p><strong>Sous total : </strong>{this.props.product.price*this.props.product.quantity} &euro;</p>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n\t...ownProps\n});\n\nexport default connect(mapStateToProps)(CartItem);","// import React from 'react';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport {Link} from 'react-router-dom';\n\nclass CartTotal extends React.Component {\n    render() {\n        let total = this.props.shopItems.map(item => item.price * item.quantity).reduce((accumulator, currentValue) => (accumulator + currentValue))\n        return (\n            <div>\n                <h2>TOTAL</h2>\n                <h3>Livraison :</h3>\n                <h3>Total  payer : {total} &euro;</h3>\n                <Link to= '/checkout'><button className=\"payment\">Payment</button></Link>\n                <div id=\"credit-cards\">\n                    <img src=\"/SVG/credit-card-maestro.svg\" alt=\"credit-card-maestro\" style={{ width: '40px' }} className=\"credit-card\"></img>\n                    <img src=\"/SVG/credit-card-master.svg\" alt=\"credit-card-master\" style={{ width: '40px' }} className=\"credit-card\"></img>\n                    <img src=\"/SVG/credit-card-american-express.svg\" alt=\"credit-card-american-express\" style={{ width: '50px' }} className=\"credit-card\"></img>\n                    <img src=\"/SVG/credit-card-visa.svg\" alt=\"credit-card-visa\" style={{ width: '60px' }} className=\"credit-card\"></img>\n                    <img src=\"/SVG/credit-card-paypal.svg\" alt=\"credit-card-paypal\" style={{ width: '70px' }} className=\"credit-card\"></img>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n    ...ownProps\n});\n\nexport default connect(mapStateToProps)(CartTotal);","import React from 'react';\nimport CartItem from './cart-item';\n\nimport { connect } from 'react-redux';\nimport CartTotal from './cart-total';\nimport {Link} from 'react-router-dom';\n\nclass Cart extends React.Component {\n\n    render() {\n        // let error;\n        // if (this.state.error) {\n        //     error = (\n        //         <div className=\"cart-error\" aria-live=\"polite\">\n        //             {this.state.error}\n        //         </div>\n        //     );\n        // }\n        if (this.props.cart.length > 0) {\n            \n            let shopItems = this.props.cart.map((shopItem, index, array) => ({\n                ...shopItem,\n                quantity: array.filter(shopItemB => shopItem.id === shopItemB.id).length\n            }))\n            shopItems = shopItems.filter((shopItem, index, self) => index === self.findIndex(shopItemB => shopItem.id === shopItemB.id))\n            return (\n                <React.Fragment>\n\n                    <div className=\"Cart-Left\">\n                        <h2>MON PANIER</h2>\n                        <div className=\"items\">\n                            {shopItems.map(item => (\n                                <CartItem product={{ ...item }} key={item.id} />\n                            ))}\n                        </div>\n                    </div>\n                    <div className=\"Cart-Right\">\n                        <CartTotal shopItems={shopItems}  />\n                    </div>\n                </React.Fragment>\n            );\n        } else {\n            return (\n                <div className=\"cart-error\" aria-live=\"polite\">\n                    <h3>Ton panier est vide :/</h3>\n                    <p>Gooo voyager sur nos principales planete afin de trouver ton bonheur :)</p>\n                    <Link to=\"/\"><button>C'est partit !</button></Link>\n                </div>\n            )\n\n        }\n    }\n}\n\nconst mapStateToProps = state => ({\n    cart: state.cart\n});\n\nexport default connect(mapStateToProps)(Cart);\n","import React from 'react';\nimport Cart from '../components/cart';\n\nexport default class CartPage extends React.Component {\n    render() {\n        return (\n            <div className=\"cart\">\n                <Cart />\n            </div>\n        );\n    }\n}\n","import React, { createContext, Component } from \"react\";\n\nexport const CheckoutContext = createContext();\n\nexport default class CheckoutProvider extends Component {\n\n\tconstructor(props) {\n        super(props);\n\t\tthis.state = {\n            cartItems: JSON.parse(localStorage.getItem(\"cart\")),\n            step: 0,\n            customer: {},\n            shipping: {},\n            nextStep: data => {\n                if(this.state.step === 0) {\n                    this.state.customer = data\n                } if(this.state.step === 1) {\n                    this.state.shipping = data\n                }\n                this.setState(prevState => ({\n                    step: prevState.step + 1\n                }))\n            },\n            previousStep: () => this.setState(prevState => ({\n                step: prevState.step - 1\n            })),\n            setShippingData: data => this.setState(() => ({\n                shipping: data\n            })),\n            setCustomerData: data => this.setState(() => ({\n                customer: data\n            })),\n\t\t}\n    }\n\n\trender() {\n        return (\n            <CheckoutContext.Provider value={this.state}>\n                {this.props.children}\n            </CheckoutContext.Provider>\n        );\n\t}\n}","import React from 'react';\nimport {CheckoutContext} from '../store/CheckoutProvider'\n\nexport default class CustomerInformation extends React.Component {\n\n    static contextType = CheckoutContext\n\n    constructor(props, context) {\n        super(props, context)\n        this.state = {\n            firstname: \"\",\n            lastname: \"\",\n            address: \"\",\n            cardNumber: null,\n            cvv: null,\n            expiryMonth: null,\n            expiryYear: null,\n        }\n    }\n\n\n    postData(event) {   \n        event.preventDefault()\n        this.context.nextStep(this.state)\n    }\n\n    handleChange(event) {\n        this.setState({\n            [event.target.name] : event.target.value\n        })\n    }\n\n    render() {\n        return (\n            <form onSubmit={this.postData.bind(this)}>\n                <div className=\"container\">\n                <div className=\"info\">\n                    {/** MODIF */}\n                    <label for=\"firstname\">Prenom</label>\n                    <input value={this.state.firstname} onChange={this.handleChange.bind(this)} name=\"firstname\" id=\"firstname\" type=\"text\"/>\n                    <label for=\"lastname\">Nom</label>\n                    <input value={this.state.lastname} onChange={this.handleChange.bind(this)} name=\"lastname\" id=\"lastname\" type=\"text\"/>\n                    <label for=\"address\">Adresse</label>\n                    <input value={this.state.address} onChange={this.handleChange.bind(this)} name=\"address\" id=\"address\" type=\"text\"/>\n                    </div>\n                    <div className=\"card__container\">\n                        <div className=\"card\">\n                            <div className=\"row credit\">\n                                <div className=\"left\">\n\n\n                                    <label for=\"cd\">Debit/ Credit Card</label>\n\n\n\n                                </div>\n                                <div className=\"right\">\n                                    {/* <img src=\"http://i66.tinypic.com/5knfq8.png\" alt=\"visa\" />\n                                    <img src=\"http://i67.tinypic.com/14y4p1.png\" alt=\"mastercard\" />\n                                    <img src=\"http://i63.tinypic.com/1572ot1.png\" alt=\"amex\" />\n                                    <img src=\"http://i64.tinypic.com/2i92k4p.png\" alt=\"maestro\" /> */}\n                                </div>\n                            </div>\n                            <div className=\"row cardholder\">\n                                <div className=\"info\">\n\n\n                                    {/** MODIF */}\n                                    <label for=\"cardholdername\">Name</label>\n                                    <input value={this.state.cardholdername} onChange={this.handleChange.bind(this)} placeholder=\"e.g. Richard Bovell\" id=\"cardholdername\" type=\"text\" />\n\n                                </div>\n                            </div>\n                            <div className=\"row number\">\n                                <div className=\"info\">\n\n\n                                    {/** MODIF */}\n                                    <label for=\"cardnumber\">Card number</label>\n                                    <input value={this.state.cardNumber} onChange={this.handleChange.bind(this)} name=\"cardNumber\" id=\"cardNumber\" type=\"text\" pattern=\"[0-9]{16,19}\" maxlength=\"19\" placeholder=\"8888-8888-8888-8888\"\n                                        />\n\n\n\n                                </div>\n                            </div>\n                            <div className=\"row details\">\n                                <div className=\"left\">\n                                    <label for=\"expiry-date\">Expiry</label>\n\n\n                                    {/** MODIF */}\n                                    <select value={this.state.expiryMonth} onChange={this.handleChange.bind(this)} name=\"expiryMonth\" id=\"expiry-date\">\n                                        <option>MM</option>\n                                        <option value=\"1\">01</option>\n                                        <option value=\"2\">02</option>\n                                        <option value=\"3\">03</option>\n                                        <option value=\"4\">04</option>\n                                        <option value=\"5\">05</option>\n                                        <option value=\"6\">06</option>\n                                        <option value=\"7\">07</option>\n                                        <option value=\"8\">08</option>\n                                        <option value=\"9\">10</option>\n                                        <option value=\"11\">11</option>\n                                        <option value=\"12\">12</option>\n                                    </select>\n                                    <span>/</span>\n\n\n                                    {/** MODIF */}\n                                    <select value={this.state.expiryYear} onChange={this.handleChange.bind(this)} name=\"expiryYear\" id=\"expiry-date\">\n                                        <option>YYYY</option>\n                                        <option value=\"2016\">2016</option>\n                                        <option value=\"2017\">2017</option>\n                                        <option value=\"2018\">2018</option>\n                                        <option value=\"2019\">2019</option>\n                                        <option value=\"2020\">2020</option>\n                                        <option value=\"2021\">2021</option>\n                                        <option value=\"2022\">2022</option>\n                                        <option value=\"2023\">2023</option>\n                                        <option value=\"2024\">2024</option>\n                                        <option value=\"2025\">2025</option>\n                                        <option value=\"2026\">2026</option>\n                                        <option value=\"2027\">2027</option>\n                                        <option value=\"2028\">2028</option>\n                                        <option value=\"2029\">2029</option>\n                                        <option value=\"2030\">2030</option>\n                                    </select>\n\n\n\n\n\n                                </div>\n                                <div className=\"right\">\n\n\n                                    {/** MODIF */}\n                                    <label for=\"cvv\">CVC/CVV</label>\n                                    <input value={this.state.cvv} onChange={this.handleChange.bind(this)} name=\"cvv\" type=\"text\" maxlength=\"4\" placeholder=\"123\" />\n\n\n\n\n                                    <span data-balloon-length=\"medium\" data-balloon=\"The 3 or 4-digit number on the back of your card.\" data-balloon-pos=\"up\">i</span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"button\">\n\n\n                        {/** MODIF */}\n                        <button>Suivant</button>\n\n                        </div>\n                    </div>\n                </form>\n        )\n\n    }\n}\n\n","import React, { Component } from 'react'\nimport {CheckoutContext} from '../store/CheckoutProvider'\n\nexport default class Shipping extends Component {\n\n    static contextType = CheckoutContext\n\n    constructor(props, context) {\n      super(props, context)\n      this.state = {\n        courier: \"relais\"\n      }\n    }\n \n    postData(event) {   \n      event.preventDefault()\n      this.context.nextStep(this.state)\n   }\n\n    handleChange(event) {\n      this.setState({\n          [event.target.name] : event.target.value\n      })\n   }\n\n    render() {\n        return (\n        <form onSubmit={this.postData.bind(this)}>\n          <label>Frais de port</label>\n          <div>\n            <label for=\"relais\">\n              Relais\n              <input\n              id=\"relais\"\n              checked={this.state.courier === 'relais'} \n              onChange={this.handleChange.bind(this)}\n              name=\"courier\" \n              type=\"radio\" \n              value=\"relais\" />\n            </label>\n\n            <label for=\"standard\">\n              Standard\n              <input \n              id=\"standard\"\n              checked={this.state.courier === 'standard'} \n              onChange={this.handleChange.bind(this)}\n              name=\"courier\" \n              type=\"radio\" \n              value=\"standard\" />\n            </label>\n\n            <label for=\"express\">\n              Express\n              <input\n              id=\"express\"\n              checked={this.state.courier === 'express'} \n              onChange={this.handleChange.bind(this)}\n              name=\"courier\" \n              type=\"radio\" \n              value=\"express\" />\n            </label>\n          </div>\n          <button>Suivant</button>\n        </form>\n        )\n    }\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport {CheckoutContext} from '../store/CheckoutProvider'\n\n\nclass Total extends React.Component {\n\n    static contextType = CheckoutContext\n\n    confirm(event) {   \n        event.preventDefault()\n        let orders = JSON.parse(localStorage.getItem(\"orders\"))\n        if(orders === null) {\n            orders = []\n        }\n        orders.push(this.context)\n        localStorage.setItem(\"orders\", JSON.stringify(orders))\n    }\n\n    render() {\n        let total = this.context.cartItems.map(item => item.price * item.quantity).reduce((accumulator, currentValue) => (accumulator + currentValue)) \n        return (\n            <div>\n                <form onSubmit={this.confirm.bind(this)}>\n                     <h4>Detaille de Votre Command</h4>\n                     <div>\n                         Prenom: {this.context.customer.firstname}\n                    </div>\n                    <div>\n                         Nom: {this.context.customer.lastname}\n                    </div>\n                    <div>\n                        Address: {this.context.customer.address}\n                    </div>\n                    <div>\n                        Type de livraison: {this.context.shipping.courier}\n                    </div>\n                    <div>\n                    {/* <h1>{this.props.product.name}</h1> \n                    <span><strong>Prix unit: </strong> {this.props.product.price} &euro;</span><br></br>\n                    <span><strong>Description : </strong>{this.props.product.description} </span>\n                    <div><strong>x : </strong>{this.props.product.quantity} </div>\n                    <div><strong>Prix total : </strong>{this.props.product.price*this.props.product.quantity} &euro;</div>   */}\n\n                        <h4>Resume du Panier</h4>\n                        {this.context.cartItems.map(cartItem => (\n                            <div>\n                                <span><strong>Nom de Produit : </strong> {cartItem.name}</span><br></br>\n                                <span><strong>Prix unit: </strong> {cartItem.price} &euro;</span><br></br>\n                                <div><strong>x : </strong>{cartItem.quantity}</div>\n                            </div>\n                        ))}\n                        <div><strong>Prix total : </strong>{total} &euro;</div>\n                    </div>\n                    \n                    <div className=\"button\">\n                        {/** MODIF */}\n                        <button>Confirm and Pay</button>\n                    </div>\n                </form>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n\t...ownProps\n});\n\n\nexport default connect(mapStateToProps)(Total);","import React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport CheckoutProvider, {CheckoutContext} from \"../store/CheckoutProvider\"\nimport CustomerInformation from '../components/checkout-customer';\nimport Shipping from '../components/checkout-shipping'\nimport Total from '../components/checkout-total'\n\nclass CheckoutPage extends Component {\n\n\tstatic contextType = CheckoutContext\n\n\trender() {\n\t\treturn (\n\t\t\t<CheckoutProvider>\n\t\t\t\t<CheckoutContext.Consumer>\n\t\t\t\t\t{value =>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{value.step === 0 && <CustomerInformation />}\n\t\t\t\t\t\t\t{value.step === 1 && <Shipping />}\n\t\t\t\t\t\t\t{value.step === 2 && <Total />}\n\t\t\t\t\t\t\t{value.step > 0 && <button onClick={() => value.previousStep()}>Previous</button>}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</CheckoutContext.Consumer>\n\t\t\t</CheckoutProvider>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = state => ({\n\tuser: state.auth.currentUser\n});\n\nexport default connect(mapStateToProps)(CheckoutPage);\n\n","import React from 'react';\nimport { CheckoutContext } from '../store/CheckoutProvider'\nimport requiresLogin from '../components/requires-login';\nimport { connect } from 'react-redux';\n\n\nclass OrdersPage extends React.Component {\n\n    static contextType = CheckoutContext\n\n    render() {\n\n        let orders = JSON.parse(localStorage.getItem(\"orders\"))\n        if (orders === null) {\n            orders = []\n        }\n        return (\n            <div>\n                <h2>Detail de commande :</h2>\n                {orders.map(order => (\n                    <div>\n                        {order.cartItems.map(cartItem => (\n                            <div>\n                                <h4>Nom produit : {cartItem.name}</h4>\n                                <h4>Description : {cartItem.description}</h4>\n                                <h4>Prix : {cartItem.price}  &euro;</h4>\n                                <h4>{cartItem.images}</h4>\n                                <h4>Quantite : {cartItem.quantity}</h4>\n                            </div>\n                        ))}\n                        <h2>Shipping :</h2>\n                        <h4>Service postal : {order.shipping.shippingType}</h4>\n                        <h2>Customer :</h2>\n                        <h4>Nom : {order.customer.firstname}</h4>\n                        <h4>Prenom : {order.customer.lastname}</h4>\n                        <h4>Addres : {order.customer.address}</h4>\n                    </div>\n                ))};\n            </div>\n        )\n    }\n}\n\n\nconst mapStateToProps = state => ({\n\tloggedIn: state.auth.currentUser !== null\n});\n\nexport default requiresLogin()(connect(mapStateToProps)(OrdersPage));","import React from 'react';\nimport {connect} from 'react-redux';\nimport {Route, withRouter, Switch} from 'react-router-dom';\n\nimport HeaderBar from './header-bar';\n\nimport LandingPage from '../pages/landing-page';\nimport AdminPage from '../pages/admin-page';\nimport DashboardPage from '../pages/dashboard-page';\nimport RegistrationPage from '../pages/registration-page';\nimport LoginPage from '../pages/login-page';\nimport ShopsPage from '../pages/shops-page';\nimport ShopPage from '../pages/shop-page';\nimport DetailsProduct from '../pages/product-page';\nimport CartPage from '../pages/cart-page'\nimport CheckoutPage from '../pages/checkout-page'\nimport OrdersPage from '../pages/orders-page'\n\nimport {refreshAuthToken} from '../actions/auth';\n\nexport class App extends React.Component {\n\t\tcomponentDidUpdate(prevProps) {\n\t\t\t\tif (!prevProps.loggedIn && this.props.loggedIn) {\n\t\t\t\t\t// When we are logged in, refresh the auth token periodically\n\t\t\t\t\tthis.startPeriodicRefresh();\n\t\t\t\t} else if (prevProps.loggedIn && !this.props.loggedIn) {\n\t\t\t\t\t// Stop refreshing when we log out\n\t\t\t\t\tthis.stopPeriodicRefresh();\n\t\t\t\t}\n\t\t}\n\n\t\tcomponentWillUnmount() {\n\t\t\tthis.stopPeriodicRefresh();\n\t\t}\n\n\t\tstartPeriodicRefresh() { // FIXME React admin might need some glue to work with this\n\t\t\tthis.refreshInterval = setInterval(\n\t\t\t\t\t() => this.props.dispatch(refreshAuthToken()),\n\t\t\t\t\t60 * 60 * 1000 // One hour\n\t\t\t);\n\t\t}\n\n\t\tstopPeriodicRefresh() {\n\t\t\tif (!this.refreshInterval) {\n\t\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearInterval(this.refreshInterval);\n\t\t}\n\n\t\trender() {\n\t\t\t\treturn (\n\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t<Route exact path=\"/admin\" component={AdminPage} />\n\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t<HeaderBar />\n\t\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t\t<Route exact path=\"/\" component={LandingPage} />\n\t\t\t\t\t\t\t\t\t<Route exact path=\"/register\" component={RegistrationPage} />\n\t\t\t\t\t\t\t\t\t<Route exact path=\"/login\" component={LoginPage} />\n\t\t\t\t\t\t\t\t\t<Route exact path=\"/dashboard\" component={DashboardPage} />\n\t\t\t\t\t\t\t\t\t<Route exact path=\"/category/:id\" component={ShopsPage} />\n\t\t\t\t\t\t\t\t\t<Route exact path=\"/category/:cat_id/shop/:shop_id\" component={ShopPage} />\n\t\t\t\t\t\t\t\t\t<Route exact path=\"/product/:product_id\" component={DetailsProduct} />\n\t\t\t\t\t\t\t\t\t<Route exact path=\"/cart\" component={CartPage} />\n\t\t\t\t\t\t\t\t\t<Route exact path=\"/checkout\" component={CheckoutPage} />\n\t\t\t\t\t\t\t\t\t<Route exact path=\"/orders\" component={OrdersPage} />\n\t\t\t\t\t\t\t\t\t<Route><div>404 Not found</div></Route>\n\t\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t</Switch>\n\t\t\t\t);\n\t\t}\n}\n\nconst mapStateToProps = state => ({\n\t\thasAuthToken: state.auth.authToken !== null,\n\t\tloggedIn: state.auth.currentUser !== null\n});\n\n// Deal with update blocking - https://reacttraining.com/react-router/web/guides/dealing-with-update-blocking\nexport default withRouter(connect(mapStateToProps)(App));\n","import {\n\t\tSET_AUTH_TOKEN,\n\t\tCLEAR_AUTH,\n\t\tAUTH_REQUEST,\n\t\tAUTH_SUCCESS,\n\t\tAUTH_ERROR\n} from '../actions/auth';\n\nconst initialState = {\n\t\ttoken: null,\n\t\tcurrentUser: null,\n\t\tloading: false,\n\t\terror: null\n};\n\nexport default function reducer(state = initialState, action) {\n\t\tif (action.type === SET_AUTH_TOKEN) {\n\t\t\t\treturn Object.assign({}, state, {\n\t\t\t\t\t\ttoken: action.token,\n\t\t\t\t\t\trefreshToken: action.refreshToken\n\t\t\t\t});\n\t\t} else if (action.type === CLEAR_AUTH) {\n\t\t\t\treturn Object.assign({}, state, {\n\t\t\t\t\t\ttoken: null,\n\t\t\t\t\t\trefreshToken: null,\n\t\t\t\t\t\tcurrentUser: null\n\t\t\t\t});\n\t\t} else if (action.type === AUTH_REQUEST) {\n\t\t\t\treturn Object.assign({}, state, {\n\t\t\t\t\t\tloading: true,\n\t\t\t\t\t\terror: null\n\t\t\t\t});\n\t\t} else if (action.type === AUTH_SUCCESS) {\n\t\t\t\treturn Object.assign({}, state, {\n\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\tcurrentUser: action.currentUser\n\t\t\t\t});\n\t\t} else if (action.type === AUTH_ERROR) {\n\t\t\t\treturn Object.assign({}, state, {\n\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\terror: action.error\n\t\t\t\t});\n\t\t}\n\t\treturn state;\n}\n","import {normalizeResponseErrors} from './utils';\n\nexport const FETCH_PROTECTED_DATA_SUCCESS = 'FETCH_PROTECTED_DATA_SUCCESS';\nexport const fetchProtectedDataSuccess = data => ({\n\ttype: FETCH_PROTECTED_DATA_SUCCESS,\n\tdata\n});\n\nexport const FETCH_PROTECTED_DATA_ERROR = 'FETCH_PROTECTED_DATA_ERROR';\nexport const fetchProtectedDataError = error => ({\n\ttype: FETCH_PROTECTED_DATA_ERROR,\n\terror\n});\n\nexport const fetchProtectedData = () => (dispatch, getState) => {\n\tconst authToken = getState().auth.authToken;\n\treturn fetch(`/protected`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t// Provide our auth token as credentials\n\t\t\tAuthorization: `Bearer ${authToken}`\n\t\t}\n\t})\n\t\t.then(res => normalizeResponseErrors(res))\n\t\t.then(res => res.json())\n\t\t.then(({data}) => dispatch(fetchProtectedDataSuccess(data)))\n\t\t.catch(err => {\n\t\t\tdispatch(fetchProtectedDataError(err));\n\t\t});\n};\n","import {\n    FETCH_PROTECTED_DATA_SUCCESS,\n    FETCH_PROTECTED_DATA_ERROR\n} from '../actions/protected-data';\n\nconst initialState = {\n    data: '',\n    error: null\n};\n\nexport default function reducer(state = initialState, action) {\n    if (action.type === FETCH_PROTECTED_DATA_SUCCESS) {\n        return Object.assign({}, state, {\n            data: action.data,\n            error: null\n        });\n    } else if (action.type === FETCH_PROTECTED_DATA_ERROR) {\n        return Object.assign({}, state, {\n            error: action.error\n        });\n    }\n    return state;\n}\n","import { createStore, applyMiddleware, combineReducers } from 'redux'\nimport {reducer as formReducer} from 'redux-form'\nimport thunk from 'redux-thunk'\nimport authReducer from './reducers/auth'\nimport cartReducer from './reducers/cart'\nimport protectedDataReducer from './reducers/protected-data'\nimport { setAuthToken, refreshAuthToken } from './actions/auth'\n\nconst cart = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) : []\n\nconst store = createStore(\n\t\tcombineReducers({\n\t\t\t\tcart: cartReducer,\n\t\t\t\tform: formReducer,\n\t\t\t\tauth: authReducer,\n\t\t\t\tprotectedData: protectedDataReducer\n\t\t}),\n\t\t{cart},\n\t\tapplyMiddleware(thunk)\n)\n\nstore.subscribe(state => {\n\tlocalStorage.setItem('cart', JSON.stringify(store.getState().cart))\n})\n\n// Hydrate the token from localStorage if it exist\nconst token = localStorage.getItem(\"token\")\nconst refreshToken = localStorage.getItem(\"refresh_token\")\nif (token) {\n\tstore.dispatch(setAuthToken(token, refreshToken))\n\tstore.dispatch(refreshAuthToken())\n}\n\nexport default store\n","export default function reducer(state = [], action) {\n\t\tif (action.type === \"ADD_PRODUCT\") {\n\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t\t...state,\n\t\t\t\t\t\t\t\taction.product\n\t\t\t\t\t\t]\n\t\t} else if (action.type === \"DELETE_PRODUCT\") {\n\t\t\t\tlet index = state.findIndex(product => product.id === action.product.id)\n\t\t\t\tstate.splice(index, 1)\n\t\t\t\treturn [\n\t\t\t\t\t\t...state\n\t\t\t\t]\n\t\t}\n\t\treturn state;\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {BrowserRouter as Router} from 'react-router-dom';\nimport {Provider} from 'react-redux';\nimport App from './components/app';\nimport store from './store';\n\nReactDOM.render(\n\t\t<Provider store={store}>\n\t\t\t\t<Router basename={process.env.REACT_APP_PUBLIC_URL}>\n\t\t\t\t\t\t<App />\n\t\t\t\t</Router>\n\t\t</Provider>,\n\t\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}